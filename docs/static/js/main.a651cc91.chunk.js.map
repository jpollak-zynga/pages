{"version":3,"sources":["zynga.svg","assets/icon_menu.svg","assets/icon_info.svg","scooch.png","GoalComponent.tsx","GoalListComponent.tsx","Goals.ts","classNames.ts","FooterComponent.tsx","Globals.ts","InviteComponent.tsx","isWord.tsx","MenuItemComponent.tsx","AccordionCell.tsx","RulesComponent.tsx","TileSetComponent.tsx","App.tsx","MainMenuComponent.tsx","TileDefinitions.tsx","WordFinder.ts","SplashScreenComponent.tsx","serviceWorker.ts","index.tsx","assets/icon_nuke.png","assets/icon_pass.png","assets/icon_reset.png","assets/icon_tileBag.svg","tile.svg"],"names":["module","exports","__webpack_require__","p","GoalComponent","_React$PureComponent","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","props","mode","renderVertical","renderHorizontal","react_default","a","createElement","Row_default","id","className","Col_default","md","Badge_default","variant","goal","type","description","pill","points","xs","React","PureComponent","GoalListComponent","_this$props","goals","move","pendingMove","canPlay","board","Card_default","Header","Body","map","index","possible","classNames","check","compact","join","GoalComponent_GoalComponent","_this$props2","Fragment","Goal","letters","t","letter","possibleWithBoard","word","checkWord","VerbGoal","_Goal","_getPrototypeOf2","_this","_len","length","args","Array","_key","call","concat","includes","endsWith","json","VerbPastGoal","_Goal2","_getPrototypeOf3","_this2","_len3","_key3","DoublesGoal","_Goal3","_this3","get","split","StartsWithGoal","_Goal4","_this4","startsWith","CheapskateGoal","filter","e","some","LengthGoal","classes","ImageWithDisabledState","action","disabled","onClick","undefined","react","Image_default","assign","FooterComponent","menu","canReset","reset","play","playLabel","canPass","passWillEndGame","pass","usedNuke","noMoreTiles","nuke","nukeTitle","Button_default","src","menuIcon","passIcon","nukeIcon","title","resetIcon","href","phone","window","innerWidth","InviteComponent","gameUrl","playerName","changePlayerName","dismiss","Modal_default","backdrop","show","onHide","scrollable","closeButton","Title","Figure_default","lib_default","Caption","target","rel","Form_default","Group","Label","Control","placeholder","DEFAULT_PLAYER_NAME","onChange","event","style","width","Footer","Component","TRIE","require","find","forEach","tile","toLocaleLowerCase","MenuItemComponent","icon","badge","onClickDisabled","Image","AccordionCell","onSelect","eventKey","Accordion_default","Toggle","as","Card","cursor","Collapse","children","RulesPanelKey","TileDefinitionComponent","observer","remaining","tileDefinition","count","TileSetComponent","_class2","_React$Component2","_this$props$tileSet","tileSet","name","tiles","bag","TileSetComponent_TileDefinitionComponent","MoveTypes","SESSION_STORAGE_KEY","CURRENT_VERSION","RulesComponent","activeEventKey","setState","state","console","log","version","stateString","sessionStorage","getItem","JSON","parse","_unused","removeItem","setItem","stringify","renderBody","options","changeOptions","resetOptions","defaultActiveKey","helpNew","howToPlay","oneScoochPerTurn","Badge","bonusForLongerWords","helpEndTurn","helpNuke","helpEnd","helpTiles","src_TileSetComponent","helpProto","Check","label","checked","originalOptions","objectSpread","dictionary","invite","MainMenuComponent","hide","help","MenuItemComponent_MenuItemComponent","infoIcon","tileBagIcon","TileDefinition","TileDefinitions_class","initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","applyDecoratedDescriptor","prototype","observable","configurable","enumerable","writable","initializer","TileDefinitions","_class3","TileSet","_descriptor4","_descriptor5","WordFinder","onWordFound","y","x","seed","search","pos","result","push","adjacent","info","prefix","next","getOwnPropertyNames","validIndex","indexOf","valid","splice","getPrefixInfo","adjacentFree","nextPos","nextTile","toLowerCase","toConsumableArray","SplashScreenComponent","solo","challenge","scoochLogo","DEFAULT_OPTIONS","UID","playerScore","player","words","i","bonusPoints","reduce","b","getTileSet","tileSetName","TileSets","APP_ID","App","_React$Component","automation","loadGameId","forcePushGameData","batonTimeout","tickInterval","pollInterval","automateInterval","pushImmediate","auth","lastSavedState","pendingDrops","clearDrops","showInvite","getToken","password","deviceIdentifier","userId","authUserId","loading","fetch","method","body","appId","headers","Content-Type","then","response","status","error","Error","statusText","token","onAuthenticated","catch","localStorage","setInterval","poll","automate","gameId","uiState","pullGameData","updateProhibited","gameStateLocked","newBaton","myUserId","timeout","Date","now","boardStateSource","stateToJson","boardState","needsPush","diff","warn","stateChangesWhileNotMyTurn","baton","gameStateVersion","Authorization","accessType","meta","hideSplash","callback","splashOpen","goChallenge","goSolo","onExchange","aIndex","findIndex","bIndex","reordered","newIndex","scooched","change","canSelect","seedTile","indexRow","Math","floor","seedRow","abs","canScooch","keyA","keyB","getIndex","tick","myPlayer","_loop3","_i","space","j","random","drop","original","pop","forceUpdate","availableLetters","sample","uniqBy","shift","onClickItem","onNuke","onPass","onPlay","_this$state","players","playerIndex","canNuke","automated","possibilities","findWords","sort","tilePoints","tileSelected","onSmear","toString","preserveIndex","tileToDeselect","smeared","showMenu","mainMenuOpen","hideMenu","showHelp","section","helpOpen","hideHelp","onReset","nukers","passers","over","playedWord","tileBonusPoints","unshift","drops","playMove","announceGoal","without","menuState","savedMenuState","data","uuid","announcements","newGame","currentPlayer","zid","location","_loop","_loop2","hydrateGoals","fromJson","query","queryString","prevProps","prevState","ensureParticipant","clearTimeout","setTimeout","history","pushState","path","clearInterval","_this5","Alert_default","Heading","selectableLetters","onDone","isWord","scoredPlayers","score","overHeader","stars","playedTile","itIsMyTurn","renderPlayers","renderModal","item","backgroundImage","backgroundSize","backgroundRepeat","onAnimationEnd","message","SlideGrid","canExchange","tap","done","smear","exchange","backgroundColor","backgroundBlendMode","GoalListComponent_GoalListComponent","FooterComponent_FooterComponent","_this6","_response$meta","hydrateAppState","baseState","omit","unassignedPlayer","_this7","lastWord","leftSide","image","zynga","roundedCircle","isMe","pointsWord","nameAndScore","_this$state2","renderSplashScreen","renderQrDialog","renderMainMenu","helpMenu","renderHelp","_this8","SplashScreenComponent_SplashScreenComponent","_this9","InviteComponent_InviteComponent","passWillResign","MainMenuComponent_MainMenuComponent","RulesComponent_RulesComponent","announce","distance","_this10","Boolean","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a651cc91.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/zynga.ffedddac.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_menu.ae99c58d.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_info.b13e99d4.svg\";","module.exports = __webpack_public_path__ + \"static/media/scooch.6a57f043.png\";","import {IGoal} from 'Goals';\nimport React from 'react';\nimport Badge from 'react-bootstrap/Badge';\nimport Col from 'react-bootstrap/Col';\nimport Image from 'react-bootstrap/Image';\nimport Row from 'react-bootstrap/Row';\nimport \"Goals.css\";\nimport tile from \"tile.svg\";\n\nexport class GoalComponent extends React.PureComponent<{\n    mode: \"vertical\" | \"horizontal\",\n    goal: IGoal,\n    id: number,\n    className: string,\n}> {\n    public render() {\n        switch (this.props.mode) {\n            case \"vertical\":\n                return this.renderVertical();\n            case \"horizontal\":\n                return this.renderHorizontal();\n        }\n    }\n\n    private renderVertical() {\n        return (\n            <Row key={this.props.id} className={this.props.className}>\n                <Col md={10}>\n                    <Badge variant=\"warning\">{this.props.goal.type}</Badge>\n                    <br/>\n                    {this.props.goal.description}\n                </Col>\n                <Col md={2}>\n                    <Badge variant=\"success\" pill={true}>\n                        +{this.props.goal.points}\n                    </Badge>\n                </Col>\n            </Row>\n        );\n    }\n    private renderHorizontal() {\n        return (\n            <Col key={this.props.id} className={this.props.className} xs={4}>\n                <div>\n                <Row>\n                    <div className=\"bonus-circle\">\n                        +{this.props.goal.points}\n                    </div>\n                </Row>\n                <Row>\n                <Col className=\"flex-grow\">\n                        {this.props.goal.description}\n                    </Col>\n                </Row>\n                </div>\n            </Col>\n        );\n    }\n}\n","import {ITile} from 'App';\nimport {GoalComponent} from 'GoalComponent';\nimport {IGoal} from 'Goals';\nimport compact from 'lodash/compact';\nimport {IPlay} from 'Move';\nimport React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\n\nexport class GoalListComponent extends React.PureComponent<{\nmode: \"vertical\" | \"horizontal\",\n  goals: IGoal[];\n  pendingMove: IPlay;\n  board: ITile[];\n  canPlay: boolean;\n}> {\n    public render() {\n        switch (this.props.mode) {\n            case \"vertical\":\n                return this.renderVertical();\n            case \"horizontal\":\n                return this.renderHorizontal();\n        }\n    }\n\n    private renderVertical() {\n        const {goals, pendingMove: move, canPlay, board} = this.props;\n\n        return <Card>\n            <Card.Header>Goals</Card.Header>\n            <Card.Body>\n                {goals.map((goal, index) => {\n                    const possible = goal.possible(board);\n                    const thisMoveQualifies = canPlay && goal.check(move);\n                    const classNames = ['goal', thisMoveQualifies && 'qualifies', possible && 'possible'];\n                    const className = compact(classNames).join(' ')\n                    return <GoalComponent goal={goal} id={index} key={index} className={className}\n                                          mode={\"horizontal\"}/>;\n                })}\n            </Card.Body>\n        </Card>;\n    }\n\n    private renderHorizontal() {\n        const {goals, pendingMove: move, canPlay, board} = this.props;\n\n        return <><Row className=\"goals-header\">\n            <Col xs={1}/>\n            <Col className=\"hr flex-grow\"/>\n            <Col className=\"goals-title\" xs={\"auto\"}>Goals</Col>\n            <Col className=\"hr flex-grow\"/>\n            <Col xs={1}/>\n        </Row>\n        <Row className={\"goals-horizontal\"}>\n                {goals.map((goal, index) => {\n                    const possible = goal.possible(board);\n                    const thisMoveQualifies = canPlay && goal.check(move);\n                    const classNames = ['goal', thisMoveQualifies && 'qualifies', possible && 'possible'];\n                    const className = compact(classNames).join(' ')\n                    return <GoalComponent goal={goal} id={index} key={index} className={className}\n                                          mode={\"horizontal\"}/>;\n                })}\n        </Row></>;\n    }\n}\n","import { ITile } from './App';\nimport { IPlay } from \"./Move\";\n\ntype GoalType = 'Get Moving' | 'Over It' | 'Double Up' | 'Up Front' | 'Cheapskate' | 'Shortie';\n\nexport interface IGoal {\n    type: GoalType;\n    description: string;\n    points: number;\n    possible(board: ITile[]): boolean | \"maybe\";\n    check(move: IPlay): boolean;\n}\n\nabstract class Goal implements IGoal {\n    abstract type: GoalType;\n    abstract get description(): string;\n    abstract points: number;\n    possible(board: ITile[]) {\n        const letters = board.map((t) => t.letter).join(\"\");\n        return this.possibleWithBoard(letters);\n    }\n    check(move: IPlay): boolean {\n        const word = move.word.map((t) => t.letter).join(\"\");\n        return this.checkWord(word);\n    }\n    abstract possibleWithBoard(board: string): boolean;\n    abstract checkWord(word: string): boolean;\n}\n\nexport class VerbGoal extends Goal {\n    type = \"Get Moving\" as GoalType;\n    description = \"Play something ending in 'ing'\";\n    points = 10;\n    possibleWithBoard(board: string) {\n        return board.includes(\"I\") &&board.includes(\"N\") &&board.includes(\"G\");        \n    }\n    checkWord(word: string): boolean {\n        return word.endsWith(\"ING\");\n    }\n    public static fromJson(json: any) {\n        return new VerbGoal();\n    }\n}\n\nexport class VerbPastGoal extends Goal {\n    type = \"Over It\" as GoalType;\n    description = \"Play something ending in 'ed'\";\n    points = 8;\n    possibleWithBoard(board: string) {\n        return board.includes(\"E\") &&board.includes(\"D\");        \n    }\n    checkWord(word: string): boolean {\n        return word.endsWith(\"ED\");\n    }\n    public static fromJson(json: any) {\n        return new VerbPastGoal();\n    }\n}\n\nexport class DoublesGoal extends Goal {\n    type = \"Double Up\" as GoalType;\n    get description() { return `Play something with two '${this.letter}'s`; }\n    points = 7;\n    private readonly letter: string;\n    constructor(letter: string) {\n        super();\n        this.letter = letter;\n    }\n    possibleWithBoard(board: string) {\n        return board.split(this.letter).length >= 3;\n    }\n    checkWord(word: string): boolean {\n        return word.split(this.letter).length >= 3;\n    }\n    public static fromJson(json: any) {\n        return new DoublesGoal(json.letter);\n    }\n}\n\nexport class StartsWithGoal extends Goal {\n    type = \"Up Front\" as GoalType;\n    get description() { return `Play something that starts with '${this.letter}'`; }\n    points = 5;\n    private readonly letter: string;\n    constructor(letter: string) {\n        super();\n        this.letter = letter;\n    }\n    possibleWithBoard(board: string) {\n        return board.split(this.letter).length >= 2;\n    }\n    checkWord(word: string): boolean {\n        return word.startsWith(this.letter);\n    }\n    public static fromJson(json: any) {\n        return new StartsWithGoal(json.letter);\n    }\n}\n\nexport class CheapskateGoal implements IGoal {\n    possible(board: ITile[]) {\n        if (board.filter((e) => (e.points || 0) < 2).length >= 3) {\n            return \"maybe\";\n        }\n        return false;\n    }\n    check(move: IPlay): boolean {\n        return !move.word.some((t) => (t.points || 0) > 2);\n    }\n    type = \"Cheapskate\" as GoalType;\n    get description() { return `Only use tiles worth one or two points`; }\n    points = 10;\n    public static fromJson(json: any) {\n        return new CheapskateGoal();\n    }\n}\n\nexport class LengthGoal implements IGoal {\n    length: number;\n    constructor(length: number) {\n        this.length = length;\n    }\n    possible(board: ITile[]) {\n        return true;\n    }\n    check(move: IPlay): boolean {\n        return move.word.length === this.length;\n    }\n    type = \"Shortie\" as GoalType;\n    get description() { return `Play something ${this.length} letters long`; }\n    points = 10;\n    public static fromJson(json: any) {\n        return new LengthGoal(json.length);\n    }\n}\n","import compact from \"lodash/compact\";\n\nfunction classNames(...classes: Array<string | false | undefined>) {\n    classes = compact(classes);\n    if (classes.length === 0) {\n        return undefined;\n    }\n    return classes.join(\" \");\n}\n\nexport default classNames;\n","import \"Menus.css\";\nimport * as React from \"react\";\nimport Col from \"react-bootstrap/Col\";\nimport Image from \"react-bootstrap/Image\";\nimport Row from \"react-bootstrap/Row\";\n\nimport menuIcon from \"assets/icon_menu.svg\";\nimport nukeIcon from \"assets/icon_nuke.png\";\nimport passIcon from \"assets/icon_pass.png\";\nimport resetIcon from \"assets/icon_reset.png\";\n\nimport \"Footer.css\";\nimport Button from \"react-bootstrap/Button\";\nimport classNames from \"./classNames\";\n\ninterface IFooterProps {\n    playLabel: string | false;\n\n    canReset: boolean;\n    usedNuke: boolean;\n    noMoreTiles: boolean;\n    canPlay: boolean;\n    canPass: boolean;\n    passWillEndGame: boolean;\n\n    menu(): void;\n\n    reset(): void;\n\n    nuke(): void;\n\n    play(): void;\n\n    pass(): void;\n}\n\nfunction ImageWithDisabledState(props: {\n    src: string,\n    onClick: () => void,\n    title?: string,\n    disabled: boolean,\n    action: \"play\" | \"nuke\" | \"pass\" | \"reset\",\n}) {\n    const {action, disabled} = props;\n    let onClick: undefined | (() => void) = props.onClick;\n    if (disabled) {\n        onClick = undefined;\n    }\n    return <Row className={classNames(disabled && \"disabled\", `action-${action}`)}>\n        <Image {...props} onClick={onClick}/>\n    </Row>;\n}\n\nexport default class FooterComponent extends React.Component<IFooterProps> {\n    public render() {\n        const {\n            menu,\n\n            canReset, reset,\n            canPlay, play, playLabel,\n            canPass, passWillEndGame, pass,\n\n            usedNuke, noMoreTiles, nuke,\n        } = this.props;\n\n        let nukeTitle = \"Discard all tiles and draw new ones. You may only do this once per game.\";\n        if (usedNuke) {\n            nukeTitle = \"You may only use the nuclear option once per game.\";\n        } else if (noMoreTiles) {\n            nukeTitle = \"Its too late to use the nuclear option.\";\n        }\n\n        // const passInsteadOfPlay = !canPlay && passWillEndGame;\n        return <>\n            {playLabel && <Row className=\"footer-play-button\">\n                <Button\n                    className={classNames(\"play-button\", canPlay && \"can-play\", \"action-play\")}\n                    variant={canPlay ? \"success\" : \"outline-success\"}\n                    disabled={!canPlay}\n                    onClick={play}\n                >\n                    {playLabel}\n                </Button>\n            </Row>}\n\n            <Row className=\"footer\">\n                <Col xs={2}><Image src={menuIcon} onClick={menu}/></Col>\n                <Col xs={2}>{\n                    (usedNuke || noMoreTiles)\n                        ? <ImageWithDisabledState\n                            src={passIcon} action={\"pass\"} disabled={!canPass || passWillEndGame} onClick={pass}/>\n                        : <ImageWithDisabledState\n                            src={nukeIcon} action={\"nuke\"} disabled={usedNuke} title={nukeTitle} onClick={nuke}/>}\n                </Col>\n                <Col xs={4}>\n                    {/*    <Button*/}\n                    {/*    variant=\"success\"*/}\n                    {/*    disabled={!canPlay && !passWillEndGame}*/}\n                    {/*    onClick={passInsteadOfPlay ? pass : play}>{passInsteadOfPlay ? \"finish\" : \"play\"}*/}\n                    {/*</Button>*/}\n                </Col>\n                <Col xs={2}>\n                    <ImageWithDisabledState\n                        src={resetIcon} action={\"reset\"} disabled={!canReset} onClick={reset}/>\n                </Col>\n                <Col xs={1} className=\"email\">\n                    <a href=\"mailto:jpollak@zynga.com,dtavares@zynga.com,jvokt@zynga.com,jcarman@zynga.com\">&#9993;</a>\n                </Col>\n            </Row>\n        </>;\n\n        // return <Modal className=\"main-menu\" show={show} onHide={hide} backdrop={true}>\n        //     <Modal.Body>\n        //         <MenuItemComponent\n        //             title={\"How to Play\"}\n        //             description={\"Getting started and rules of the game\"}\n        //             icon={tile}\n        //             disabled={true}\n        //             onClick={() => {throw new Error(\"Not Implemented\")}}\n        //         />\n        //\n        //         <MenuItemComponent\n        //             title={\"Dictionary\"}\n        //             description={\"Information about which words are acceptable\"}\n        //             icon={tile}\n        //             disabled={true}\n        //             onClick={() => {throw new Error(\"Not Implemented\")}}\n        //         />\n        //\n        //         <MenuItemComponent\n        //             title={\"Tile Distribution\"}\n        //             description={\"How many tiles there are of each letter and how many remain in the bag\"}\n        //             icon={tile}\n        //             disabled={true}\n        //             onClick={() => {throw new Error(\"Not Implemented\")}}\n        //         />\n        //\n        //         <MenuItemComponent\n        //             title={\"Reset\"}\n        //             description={\"Return tiles to their original positions, restoring their point values.\"}\n        //             icon={tile}\n        //             disabled={!canReset}\n        //             onClick={reset}\n        //         />\n        //\n        //         <MenuItemComponent\n        //             title={passWillEndGame ? \"Pass\" : \"Finish\"}\n        //             description={passWillEndGame ? \"Finish the game\" : \"No moves? Pass your turn\"}\n        //             icon={tile}\n        //             disabled={!canPass}\n        //             onClick={pass}\n        //         />\n        //\n        //         <MenuItemComponent\n        //             title={\"Nuke\"}\n        //             description={nukeTitle}\n        //             icon={tile}\n        //             badge={usedNuke ? 0 : 1}\n        //             disabled={usedNuke}\n        //             onClick={nuke}\n        //         />\n        //\n        //         <MenuItemComponent\n        //             title={\"Resign\"}\n        //             description={\"End this game, but it counts as a loss\"}\n        //             icon={tile}\n        //             disabled={true}\n        //             onClick={() => {throw new Error(\"Not Implemented\")}}\n        //         />\n        //     </Modal.Body>\n        // </Modal>;\n    }\n}\n","export function phone() {\n    return window.innerWidth < 576;\n}\n","import Modal from \"react-bootstrap/Modal\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Figure from \"react-bootstrap/Figure\";\nimport QRCode from \"qrcode.react\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport React from \"react\";\nimport \"InviteComponent.css\";\nimport {phone} from \"./Globals\";\nimport {DEFAULT_PLAYER_NAME} from \"./App\";\n\ninterface IInviteComponentProps {\n    gameUrl: string;\n    playerName: string;\n\n    changePlayerName(value: string): void;\n\n    play(): void;\n\n    dismiss(): void;\n}\n\nexport default class InviteComponent extends React.Component<IInviteComponentProps> {\n    public render() {\n        const {gameUrl, playerName, changePlayerName, play, dismiss} = this.props;\n        return <Modal className={\"invite\"} backdrop={\"static\"} show={true} onHide={dismiss} scrollable={false}>\n            {\n                phone()\n                    ? <div className={\"top-spacer\"}/>\n                    : <Modal.Header closeButton={true}>\n                        <Modal.Title>\n                            Invite a Friend!\n                        </Modal.Title>\n                    </Modal.Header>\n            }\n            <Modal.Body>\n                <p>\n                    {phone() ? \"Have a friend\" : \"Have them\"} open their camera and point at this QR code.\n                    <br/>\n                    They'll join you automatically!\n                </p>\n                <Row>\n                    <Col className=\"flex-grow\"/>\n                    <Col>\n                        <Figure>\n                            <div className={\"qr\"}>\n                                <QRCode value={gameUrl}/>\n                            </div>\n                            {!phone() && <Figure.Caption>\n                                You can also copy and send them this URL:<br/>\n                                <a href={gameUrl} target=\"_blank\" rel=\"noopener noreferrer\">{gameUrl}</a>\n                            </Figure.Caption>}\n                        </Figure>\n                    </Col>\n                    <Col className=\"flex-grow\"/>\n                </Row>\n                <Row>\n                    {phone() && <Col className=\"flex-grow\"/>}\n                    <Col>\n                        <Form.Group>\n                            {!phone() && <Form.Label>Your Name</Form.Label>}\n                            <Form.Control type=\"input\" placeholder=\"Your Name\"\n                                          value={playerName === DEFAULT_PLAYER_NAME ? undefined : playerName}\n                                          onChange={changeNameThunk}/>\n                        </Form.Group>\n                    </Col>\n                    {phone() && <Col className=\"flex-grow\"/>}\n                </Row>\n            </Modal.Body>\n            {phone()\n                ? <>\n                    <Row>\n                        <Col className=\"flex-grow\"/>\n                        <Col xs={4}>\n                            <Row>\n                                <Button variant=\"success\" onClick={play} style={{width: \"100%\"}}>Play</Button>\n                            </Row>\n                        </Col>\n                        <Col className=\"flex-grow\"/>\n                    </Row>\n                    <Row>&nbsp;</Row>\n                    <Row className=\"practice\">\n                        <Col className=\"flex-grow\"/>\n                        <a onClick={dismiss}>Just Practice for Now</a>\n                        <Col className=\"flex-grow\"/>\n                    </Row>\n                </>\n                : <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={dismiss}>Solo</Button>\n                    <Button variant=\"primary\" onClick={play}>Play</Button>\n                </Modal.Footer>\n            }\n        </Modal>;\n\n        function changeNameThunk(event: any) {\n            changePlayerName(event.target.value)\n        }\n    }\n}\n","export type TrieEntry = Trie | 1 | undefined;\nexport type Word = Array<{ letter: string }>;\n\ninterface Trie {\n  [key: string]: TrieEntry,\n}\n\nconst TRIE: Trie = require(\"./trie.json\");\n\nfunction find(word: Word) {\n  let t: TrieEntry = TRIE;\n  word.forEach((tile) => {\n    if (typeof t === \"object\") {\n      t = t[tile.letter.toLocaleLowerCase()];\n    }\n  });\n  return t;\n}\n\nexport default function isWord(word: Word) {\n  const t = find(word);\n  return typeof t === \"object\" && t[\"_\"] === 1;\n}\n\nexport function getPrefixInfo(prefix: Word) {\n  const t = find(prefix);\n  if (typeof t !== \"object\") {\n    return undefined;\n  }\n  const next = Object.getOwnPropertyNames(t);\n  const validIndex = next.indexOf(\"_\");\n  const valid = validIndex >= 0;\n  if (valid) {\n    next.splice(validIndex, 1);\n  }\n  if (next.length === 0) {\n    return true;\n  }\n  return { valid, next }\n}\n","import Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport * as React from \"react\";\nimport Figure from \"react-bootstrap/Figure\";\nimport Badge from \"react-bootstrap/Badge\";\nimport compact from \"lodash/compact\";\n\ninterface IMenuItemProps {\n    icon: string;\n    title: string;\n    description: string;\n    disabled?: boolean;\n    badge?: string | number;\n    onClick(): void;\n    onClickDisabled?(): void;\n}\n\nexport default class MenuItemComponent extends React.Component<IMenuItemProps> {\n    render() {\n        const {icon, badge, title, description, disabled, onClick, onClickDisabled} = this.props;\n        return <Row className={compact([\"menu-item\", disabled && \"disabled\"]).join(\" \")} onClick={disabled ? onClickDisabled : onClick}>\n            <Col xs={2} className=\"left\">\n                <Figure>\n                    <Figure.Image src={icon}/>\n                </Figure>\n            </Col>\n            <Col className={\"right flex-grow\"}>\n                <Row>\n                    <Col className={\"title flex-grow\"}>\n                        {title}\n                    </Col>\n                    <Col xs={\"auto\"}>\n                        {badge && <Badge variant={\"success\"} pill={true}>{badge}</Badge>}\n                    </Col>\n                </Row>\n                <Row className={\"description\"}>\n                    <Col className={\"flex-fill\"}>\n                        <span>\n                            {description}\n                        </span>\n                    </Col>\n                </Row>\n            </Col>\n        </Row>;\n    }\n}\n","import React from 'react';\nimport Accordion from 'react-bootstrap/Accordion';\nimport Card from 'react-bootstrap/Card';\n\nexport default function AccordionCell(props: {\n  eventKey: string;\n  title: React.ReactNode;\n  children?: React.ReactNode;\n  onSelect(eventKey: string): void;\n}) {\n    const onClick = props.onSelect ? () => props.onSelect(props.eventKey) : undefined;\n  return <Card>\n    <Accordion.Toggle as={Card.Header} eventKey={props.eventKey} style={{ cursor: \"pointer\" }} onClick={onClick}>\n      {props.title}\n    </Accordion.Toggle>\n    <Accordion.Collapse eventKey={props.eventKey}>\n      <Card.Body>\n        {props.children}\n      </Card.Body>\n    </Accordion.Collapse>\n  </Card>;\n}\n","import AccordionCell from \"AccordionCell\";\nimport {IScoochOptions, ITile} from \"App\";\nimport React from \"react\";\nimport Accordion from \"react-bootstrap/Accordion\";\nimport Badge from \"react-bootstrap/Badge\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Modal from \"react-bootstrap/Modal\";\nimport {TileSet} from \"TileDefinitions\";\nimport TileSetComponent from \"TileSetComponent\";\nimport QRCode from \"qrcode.react\";\n\nexport enum RulesPanelKey {\n    helpNew = \"help-new\",\n    howToPlay = \"help-words\",\n    helpEndTurn = \"help-end-turn\",\n    helpNuke = \"help-nuke\",\n    helpEnd = \"help-end\",\n    helpTiles = \"help-tiles\",\n    helpProto = \"help-proto\",\n    options = \"options\",\n    dictionary = \"dictionary\",\n    invite = \"invite\",\n}\n\ninterface IRulesProps {\n    show: RulesPanelKey | boolean;\n\n    options: IScoochOptions;\n    tileSet: TileSet;\n    bag: ITile[];\n\n    onHide(): void;\n\n    changeOptions(change: (options: IScoochOptions) => IScoochOptions): void;\n\n    resetOptions(): void;\n}\n\ninterface IRulesState {\n    version: string;\n    activeEventKey: string | undefined;\n}\n\nconst SESSION_STORAGE_KEY = \"rulesState\";\n\nconst CURRENT_VERSION = \"0.4.2\";\n\nexport default class RulesComponent extends React.Component<IRulesProps, IRulesState> {\n    constructor(props: IRulesProps) {\n        super(props);\n        console.log({props});\n        if (typeof props.show !== \"boolean\") {\n            this.state = {activeEventKey: props.show, version: CURRENT_VERSION};\n            return;\n        }\n        const stateString = sessionStorage.getItem(SESSION_STORAGE_KEY);\n        if (stateString) {\n            try {\n                const state = JSON.parse(stateString) as IRulesState;\n                if (state.version !== CURRENT_VERSION) {\n                    state.activeEventKey = \"help-new\";\n                    state.version = CURRENT_VERSION;\n                }\n                this.state = state;\n                return;\n            } catch {\n                sessionStorage.removeItem(SESSION_STORAGE_KEY);\n            }\n        }\n        this.state = {activeEventKey: \"help-new\", version: CURRENT_VERSION};\n    }\n\n    public componentDidUpdate() {\n        sessionStorage.setItem(SESSION_STORAGE_KEY, JSON.stringify(this.state));\n    }\n\n    public render() {\n        const {show, onHide} = this.props;\n        return <Modal className=\"menu rules-menu\" show={!!show} onHide={onHide} scrollable={true}>\n            <Modal.Header closeButton={true}>\n                <Modal.Title>\n                    Scooch Help\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                {this.renderBody()}\n            </Modal.Body>\n        </Modal>;\n    }\n\n    public renderBody() {\n        const {options, tileSet, bag, changeOptions, resetOptions} = this.props;\n        const defaultActiveKey = this.state.activeEventKey;\n        console.log({defaultActiveKey});\n        return <Accordion defaultActiveKey={defaultActiveKey}>\n            <AccordionCell onSelect={this.onSelect} eventKey={RulesPanelKey.helpNew}\n                           title={`Whats New (v${CURRENT_VERSION})`}>\n                <dl>\n                    <dt>Goals</dt>\n                    <dd>There are now randomly-selected bonus goals shown below the play area. Complete them to earn\n                        bonus points!\n                    </dd>\n\n                    <dt>Automation</dt>\n                    <dd>Play against the computer, or have it take over for someone! Select the \"Automated\" option under\n                        a players name.\n                    </dd>\n                </dl>\n            </AccordionCell>\n\n            <AccordionCell onSelect={this.onSelect} eventKey={RulesPanelKey.howToPlay} title=\"Making Words\">\n                <ul>\n                    <li>Click <span className=\"field\">tiles</span> to add them to your word.</li>\n                    <li>Click a <span className=\"field selected\">selected</span> tile to remove it from your word.</li>\n                    <li>You may only add tiles <span className=\"field\">close</span> to the last letter of your word \n                        other tiles are <span className=\"field unselectable\">too far</span>.\n                    </li>\n                    <li>Never fear! You may scooch tiles around to make the word you want! Whether <span\n                        className=\"field\">near</span> or <span className=\"field unselectable\">far</span>, just drag\n                        tiles to where you need them.\n                    </li>\n                    <li>When you scooch a tile, it switches places with its neighbor, and both tiles lose their point\n                        values.\n                    </li>\n                    {options.oneScoochPerTurn && <li><Accordion.Toggle\n                        as={Badge} eventKey={RulesPanelKey.options}\n                        variant=\"secondary\">Option</Accordion.Toggle> You\n                        may only scooch one tile per turn, though you can move it as far as you want, and don't have to\n                        do it all at once.</li>}\n                    {options.bonusForLongerWords && <li><Accordion.Toggle\n                        as={Badge} eventKey={RulesPanelKey.options}\n                        variant=\"secondary\">Option</Accordion.Toggle> Play\n                        longer words to get bonus points!</li>}\n                </ul>\n            </AccordionCell>\n\n            <AccordionCell onSelect={this.onSelect} eventKey={RulesPanelKey.helpEndTurn} title=\"Ending Your Turn\"><p>\n                Once youre happy with your word, click the <Badge variant=\"primary\">Play Word</Badge> button.\n                The tiles that make up your word go onto the scoreboard,\n                tiles left on the board drop down into their places,\n                and new tiles slide in from the top to fill up the board.\n                Tiles you scooched but didnt use get their points back,\n                and its the next players turn!\n            </p></AccordionCell>\n\n            <AccordionCell onSelect={this.onSelect} eventKey={RulesPanelKey.helpNuke} title=\"The Nuclear Option\"><p>\n                Also known as flipping the table, once per game each player may use the <Badge\n                variant=\"warning\">Nuke</Badge> button to throw all the tiles on the board back into the bag and draw new\n                ones.\n                There is no penalty  you wont lose your turn or any points  but you may only use the nuclear option\n                once!\n            </p></AccordionCell>\n\n            <AccordionCell onSelect={this.onSelect} eventKey={RulesPanelKey.helpEnd} title=\"End of the Game\"><p>\n                When the tile bag is empty, youll notice empty spaces left on the board after tiles drop down.\n                (You can't scooch with those empty spaces.)\n                Eventually, there wont be more words to make, and youll have to <Badge\n                variant=\"secondary\">Pass</Badge>.\n                After all players pass in a row, the game ends, and the player with the most points wins!\n            </p></AccordionCell>\n\n            <AccordionCell onSelect={this.onSelect} eventKey={RulesPanelKey.helpTiles} title=\"Tile Distribution\">\n                <TileSetComponent tileSet={tileSet} bag={bag}/>\n            </AccordionCell>\n\n            <AccordionCell onSelect={this.onSelect} eventKey={RulesPanelKey.helpProto} title=\"Prototype Notes\">\n                <dl>\n                    <dt>Scooch Limit</dt>\n                    <dd>\n                        When playing with the physical prototype, we generally made the rule that you could only scooch\n                        one tile\n                        per turn, though you could move it as far as you wanted. Right now this version\n                        does <i>not</i> limit you\n                        to a single scooch per turn, but that may change.\n                    </dd>\n                    <dt>Point Values</dt>\n                    <dd>\n                        The big tiles (\n                        <span className=\"field\">J</span>\n                        <span className=\"field\">Q</span>\n                        <span className=\"field\">X</span>\n                        <span className=\"field\">Z</span>\n                        ) are way too valuable  without the riposte available in games like\n                        Scrabble and Words With Friends theyre completely dominant in final scoring. I did run a test\n                        physical prototype where scores were compressed, with the highest score being five, and the\n                        games were far more balanced (and felt fair) but were also boring. I need to find a balance  perhaps\n                        with the big tiles scoring seven points  to restore the excitement and variability.\n                    </dd>\n                </dl>\n            </AccordionCell>\n\n            <AccordionCell onSelect={this.onSelect} eventKey={RulesPanelKey.options} title=\"Options\">\n                <Form.Check type=\"checkbox\" id=\"on-scooch\" label=\"One scooch per turn\"\n                            checked={!!options.oneScoochPerTurn} onChange={() => changeOptions((originalOptions) => {\n                    // tslint:disable-next-line:no-shadowed-variable\n                    const options = {...originalOptions};\n                    options.oneScoochPerTurn = !options.oneScoochPerTurn;\n                    return options;\n                })}/>\n                <Form.Check type=\"radio\" id=\"on-length-none\" label=\"No bonus points for longer words\"\n                            checked={!(options.bonusForLongerWords === false)}\n                            onChange={() => changeOptions((originalOptions) => {\n                                // tslint:disable-next-line:no-shadowed-variable\n                                const options = {...originalOptions};\n                                options.bonusForLongerWords = false;\n                                return options;\n                            })}/>\n                <Form.Check type=\"radio\" id=\"on-length\" label=\"One bonus point for each letter over four tiles\"\n                            checked={options.bonusForLongerWords === \"constant\"}\n                            onChange={() => changeOptions((originalOptions) => {\n                                // tslint:disable-next-line:no-shadowed-variable\n                                const options = {...originalOptions};\n                                options.bonusForLongerWords = \"constant\";\n                                return options;\n                            })}/>\n                <Form.Check type=\"radio\" id=\"on-length-linear\"\n                            label=\"Increasing bonus points for words over three tiles\"\n                            checked={options.bonusForLongerWords === \"linear\"}\n                            onChange={() => changeOptions((originalOptions) => {\n                                // tslint:disable-next-line:no-shadowed-variable\n                                const options = {...originalOptions};\n                                options.bonusForLongerWords = \"linear\";\n                                return options;\n                            })}/>\n                <Button onClick={() => resetOptions()}>Reset</Button>\n            </AccordionCell>\n\n            <AccordionCell onSelect={this.onSelect} eventKey={RulesPanelKey.dictionary} title=\"Acceptable Words\">\n                <p>\n                    Words need to be at least three letters long and are checked against the <a\n                    href=\"https://diginoodles.com/The_English_Open_Word_List_%28EOWL%29\" target=\"_blank\"\n                    rel=\"noopener noreferrer\">English Open Word List</a> (EOWL).\n                </p>\n                <dl>\n                    <dt>\n                        UK Advanced Cryptics Dictionary Licensing Information\n                    </dt>\n                    <dd>\n                        Copyright  J Ross Beresford 1993-1999. All Rights Reserved.The following restriction is placed\n                        on the use of this publication: if the UK Advanced Cryptics Dictionary is used in a software\n                        package or redistributed in any form, the copyright notice must be prominently displayed and the\n                        text of this document must be included verbatim.\n                    </dd>\n                    <dt>\n                        <a href=\"https://diginoodles.com/The_English_Open_Word_List_%28EOWL%29\" target=\"_blank\"\n                           rel=\"noopener noreferrer\">The English Open Word List</a>\n                    </dt>\n                    <dd>\n                        The EOWL was developed by Ken Loge, and based on the above UKACD, but he explicitly placed no\n                        additional restrictions on its use.\n                    </dd>\n                </dl>\n\n            </AccordionCell>\n\n\n            <AccordionCell onSelect={this.onSelect} eventKey={RulesPanelKey.invite} title=\"Start a New Game\">\n                <p>\n                    https://jpollak-zynga.github.io/pages/\n                </p>\n                <QRCode value={\"https://jpollak-zynga.github.io/pages/\"}/>\n            </AccordionCell>\n        </Accordion>;\n    }\n\n    private onSelect = (activeEventKey: string) => this.setState((state) => {\n        if (state.activeEventKey === activeEventKey) {\n            return {activeEventKey: undefined};\n        } else {\n            return {activeEventKey};\n        }\n    })\n}\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { ITileSet, ITileDefinition } from \"TileDefinitions\";\nimport Card from \"react-bootstrap/Card\";\nimport { ITile } from \"App\";\n\ninterface ITileSetComponentProps {\n    tileSet: ITileSet;\n    bag?: ITile[];\n}\n\ninterface ITileSetComponentState {\n\n}\n\n@observer\nclass TileDefinitionComponent extends React.Component<{ tileDefinition: ITileDefinition, remaining?: number }> {\n    public render() {\n        const { remaining, tileDefinition } = this.props;\n        const { letter, points, count } = tileDefinition;\n        return <div className=\"tile-definition\">\n            <div className=\"tile\">\n                <div className=\"field\">\n                    <div className=\"letter\">{letter}</div>\n                    <div className=\"points\">{points}</div>\n                </div>\n            </div>\n            &nbsp;x&nbsp;{remaining ? `${remaining}/` : \"\"}{count}\n        </div>\n    }\n}\n\n@observer\nexport class TileSetComponent extends React.Component<ITileSetComponentProps, ITileSetComponentState> {\n    public render() {\n        const { name, tiles } = this.props.tileSet;\n        return <Card className=\"moves\">\n            <Card.Header>{name}</Card.Header>\n            <Card.Body>\n                {tiles.map((tileDefinition, index) => {\n                    let remaining: number | undefined = undefined;\n                    if (this.props.bag) {\n                        remaining = this.props.bag.filter((tile) => tile.letter === tileDefinition.letter).length;\n                    }\n                    return <TileDefinitionComponent\n                        key={index}\n                        tileDefinition={tileDefinition}\n                        remaining={remaining} />;\n                })}\n            </Card.Body>\n        </Card>\n    }\n}\n\nexport default TileSetComponent;\n","/* tslint:disable:max-line-length no-shadowed-variable */\nimport SlideGrid from \"@pyrogenic/slide-grid/lib/SlideGrid\";\nimport * as diff from \"deep-diff\";\nimport {GoalListComponent} from \"GoalListComponent\";\nimport {CheapskateGoal, DoublesGoal, IGoal, LengthGoal, StartsWithGoal, VerbGoal, VerbPastGoal} from \"Goals\";\nimport compact from \"lodash/compact\";\nimport omit from \"lodash/omit\";\nimport sample from \"lodash/sample\";\nimport uniqBy from \"lodash/uniqBy\";\nimport without from \"lodash/without\";\nimport * as queryString from \"querystring\";\nimport React from \"react\";\nimport Alert from \"react-bootstrap/Alert\";\nimport Button from \"react-bootstrap/Button\";\nimport Col from \"react-bootstrap/Col\";\nimport Image from \"react-bootstrap/Image\";\nimport Row from \"react-bootstrap/Row\";\nimport uuid from \"uuid/v4\";\nimport zynga from \"zynga.svg\";\nimport \"./App.css\";\nimport FooterComponent from \"./FooterComponent\";\nimport {phone} from \"./Globals\";\nimport InviteComponent from \"./InviteComponent\";\nimport IPlayer from \"./IPlayer\";\nimport isWord from \"./isWord\";\nimport MainMenuComponent from \"./MainMenuComponent\";\nimport {IPlay, IPlayedTile} from \"./Move\";\nimport RulesComponent, {RulesPanelKey} from \"./RulesComponent\";\nimport tile from \"./tile.svg\";\nimport TileSets from \"./TileDefinitions\";\nimport WordFinder from \"./WordFinder\";\nimport SplashScreenComponent from \"./SplashScreenComponent\";\n\nconst PLAYER_NAME_KEY = \"PlayerName\";\nconst LABEL_RELEASE_EXPLICITLY = false;\n\nexport const DEFAULT_PLAYER_NAME = \"Anonymous\";\n\nexport interface ITile {\n    type: \"letter\" | \"space\" | \"drop\";\n    id: string;\n    letter: string;\n    points: number;\n    renderIndex?: number;\n    drop: number;\n}\n\nenum MoveTypes {\n    pass = \"pass\",\n    nuke = \"nuke\",\n    play = \"play\",\n}\n\ntype Variant = undefined\n    | \"primary\"\n    | \"secondary\"\n    | \"success\"\n    | \"danger\"\n    | \"warning\"\n    | \"info\"\n    | \"dark\"\n    | \"light\"\n    | \"link\"\n    | \"outline-primary\"\n    | \"outline-secondary\"\n    | \"outline-success\"\n    | \"outline-danger\"\n    | \"outline-warning\"\n    | \"outline-info\"\n    | \"outline-dark\"\n    | \"outline-light\";\n\ntype BadgeVariant = Exclude<Variant, \"link\"\n    | \"outline-primary\"\n    | \"outline-secondary\"\n    | \"outline-success\"\n    | \"outline-danger\"\n    | \"outline-warning\"\n    | \"outline-info\"\n    | \"outline-dark\"\n    | \"outline-light\">;\n\nconst MOVE_VARIANTS: { [P in MoveTypes]: BadgeVariant } = {\n    play: \"primary\",\n    nuke: \"warning\",\n    pass: \"secondary\",\n};\n\nexport interface IScoochOptions {\n    solo?: boolean;\n    oneScoochPerTurn?: boolean;\n    tileSetName?: string;\n    bonusForLongerWords?: false | \"constant\" | \"linear\";\n}\n\nconst DEFAULT_OPTIONS: IScoochOptions = {\n    oneScoochPerTurn: true,\n    bonusForLongerWords: \"linear\",\n};\n\ntype IAutomationAction = {\n    type: \"tap\", a: string,\n} | {\n    type: \"scooch\",\n    a: string,\n    b: string,\n} | {\n    type: \"submit\" | \"wait\" | \"nuke\" | \"pass\",\n};\n\nlet UID = 1;\n\ninterface IUiState {\n    splashOpen?: boolean;\n    mainMenuOpen?: boolean;\n    helpOpen?: boolean | RulesPanelKey;\n}\n\ninterface IAnnouncement {\n    key: number;\n    title: string;\n    message: string;\n}\n\n/**\n * State held in the conversation meta and thus shared between players\n */\n// TODO: unflatten IAppState to make code and logic easier to follow.\ninterface ISharedState {\n    /**\n     * Represents a \"reservation\" of the right to change game state.  Mostly it was to help people put their names in\n     * when it isn't their turn at the beginning, but may not actually be necessary if the version field is properly\n     * respected (i.e. checked agains the local state after join but before edit).\n     */\n    baton?: {\n        userId: string,\n        timeout: number,\n    };\n\n    /**\n     * Same as the conversation id\n     */\n    gameId: string;\n\n    /**\n     * Optimistic concurrency version number for {gameState}\n     */\n    gameStateVersion: number;\n\n    // Would be part of this object if not flattened into {IAppState}\n    // gameState: IGameState,\n}\n\ninterface IGameState {\n    players: IPlayer[];\n    playerIndex: number;\n    nukers: number[];\n    passers: number[];\n    over: boolean;\n    announcements: IAnnouncement[];\n    options: IScoochOptions;\n    bag: ITile[];\n    board: ITile[];\n    original: ITile[];\n    word: ITile[];\n    reordered: ITile[];\n    scooched?: string;\n    smeared?: boolean;\n    goals: IGoal[];\n}\n\ninterface IAppState extends ISharedState, IGameState {\n    loading: string;\n    uiState: IUiState;\n}\n\nfunction playerScore(player: IPlayer) {\n    return player.words.map((i) => i.type === \"play\" ? i.points + i.bonusPoints : 0).reduce((a, b) => (a + b), 0);\n}\n\nfunction getTileSet(tileSetName?: string) {\n    return TileSets.find((e) => e.name === tileSetName) || TileSets[0]!;\n}\n\nfunction newGame(players?: IPlayer[], tileSetName?: string): IAppState {\n    const board: ITile[] = [];\n    const bag: ITile[] = [];\n    let id = 0;\n    const tileSet = getTileSet(tileSetName);\n    tileSet.tiles.forEach((data) => {\n        for (let j = 0; j < data.count; j++) {\n            bag.push({\n                type: \"letter\",\n                id: `tile-${id++}`,\n                letter: data.letter,\n                points: data.points,\n                drop: 0,\n            });\n        }\n    });\n    for (let j = 0; j < 16; j++) {\n        board.push({\n            type: \"drop\",\n            id: `blank-${j}`,\n        } as ITile);\n    }\n    players = players || [];\n    players.forEach((player) => player.words = []);\n    const options = {...DEFAULT_OPTIONS, tileSetName: tileSet.name};\n    const gameId = uuid();\n    return {\n        uiState: {splashOpen: true},\n        loading: \"bootstrap\",\n        gameStateVersion: 1,\n        gameId,\n        players,\n        playerIndex: 0,\n        bag,\n        board,\n        original: Array(...board),\n        word: [],\n        reordered: [],\n        nukers: [],\n        passers: [],\n        over: false,\n        options,\n        goals: [],\n        announcements: [],\n    };\n}\n\n// Cache of generated json data URLs\nconst JSON_TO_URL_DATA: { [key: string]: string } = {};\n\nfunction jsonToUrl(key: string, stuff: any) {\n    const data = new Blob([JSON.stringify(stuff)], {type: \"application/json\"});\n\n    // If we are replacing a previously generated file we need to\n    // manually revoke the object URL to avoid memory leaks.\n    if (JSON_TO_URL_DATA[key]) {\n        window.URL.revokeObjectURL(JSON_TO_URL_DATA[key]);\n    }\n\n    JSON_TO_URL_DATA[key] = window.URL.createObjectURL(data);\n\n    // returns a URL you can use as a href\n    return JSON_TO_URL_DATA[key];\n}\n\ninterface IAuth {\n    userId: string;\n    zid: string;\n    password: string;\n    token: string;\n}\n\nconst APP_ID = 5005139;\n\ninterface IQuery {\n    gameId?: string;\n}\n\nfunction getQuery() {\n    return queryString.parse(window.location.search.split(\"?\").pop() || \"\") as IQuery;\n}\n\nexport class App extends React.Component<{}, IAppState> {\n\n    private get deviceIdentifier() {\n        return localStorage.getItem(\"DeviceIdentifier\") || uuid();\n    }\n\n    private get authUserId() {\n        return localStorage.getItem(\"AuthUserId\") || undefined;\n    }\n\n    private get myPlayer() {\n        if (!this.state.players) {\n            return undefined;\n        }\n        return this.state.players.find((p) => p.userId === this.myUserId);\n    }\n\n    private get itIsMyTurn() {\n        const myUserId = this.myUserId;\n        if (!myUserId) {\n            return false;\n        }\n        const currentPlayerUserId = this.currentPlayer.userId;\n        const isMyTurn = currentPlayerUserId === myUserId;\n        return isMyTurn;\n    }\n\n    private get currentPlayer() {\n        return this.state.players[this.state.playerIndex];\n    }\n\n    private get myUserId() {\n        if (!this.auth) {\n            return undefined;\n        }\n        return this.auth.zid;\n    }\n\n    private get gameStateLocked() {\n        return this.state.baton && this.state.baton.userId !== this.myUserId && this.state.baton.timeout > Date.now();\n    }\n\n    private get canPass() {\n        return !this.state.over;\n    }\n\n    private get passWillEndGame() {\n        return this.state.passers.includes(this.state.playerIndex);\n    }\n\n    private get canReset() {\n        return this.state.reordered.length !== 0 || this.state.word.length !== 0;\n    }\n\n    private get gameUrl() {\n        if (this.state.gameId === undefined) {\n            return undefined;\n        }\n        return `${window.location.toString().split(\"?\").shift()}?gameId=${this.state.gameId}`;\n    }\n\n    private get pendingMove(): IPlay {\n        return {\n            type: \"play\",\n            word: this.state.word.map((tile) => ({\n                ...tile,\n                points: this.state.reordered.includes(tile) ? 0 : tile.points,\n            })),\n            points: 0,\n            bonusPoints: 0,\n            goals: [],\n        };\n    }\n\n    private get tileSet() {\n        return getTileSet(this.state.options.tileSetName);\n    }\n\n    /**\n     * Turn a serialized game state into a proper runtime state:\n     *  - ensure multiple serialization of the same object are turned back into references to a single object\n     *  - restore prototypes of objects that aren't pure state\n     *\n     * NB: this mutates {state} in-place\n     */\n    private static hydrateAppState(state: IAppState) {\n        // Restore object identities lost in serialization\n        // Any place where proper {ITile}s appear, we have to make sure they all reference the same object\n        for (let i = 0; i < state.word.length; i++) {\n            state.word[i] = state.board.find((tile) => tile.id === state.word[i].id)!;\n        }\n        for (let i = 0; i < state.reordered.length; i++) {\n            state.reordered[i] = state.board.find((tile) => tile.id === state.reordered[i].id)!;\n        }\n\n        // These were only for backwards-compatibility with state saved in {sessionStorage} but it's\n        // the sort of thing we schould consider doing if we add new required fields and don't want to break\n        // in-progress games.\n        //\n        // if (state.nukers === undefined) {\n        //   state.nukers = [];\n        // }\n        // if (state.passers === undefined) {\n        //   state.passers = [];\n        // }\n        // if (state.options === undefined) {\n        //   state.options = {};\n        // }\n        // if (state.announcements === undefined) {\n        //   state.announcements = [];\n        // }\n        // if (state.gameId === undefined) {\n        //   state.gameId = uuid();\n        // }\n\n        // Goals aren't plain-old-data-objects, so hydrate them\n        state.goals = this.hydrateGoals(state.goals || []);\n    }\n\n    private static hydrateGoals(goals: IGoal[]): IGoal[] {\n        return goals.map((goal) => {\n            switch (goal.type) {\n                case \"Double Up\":\n                    return DoublesGoal.fromJson(goal);\n                case \"Cheapskate\":\n                    return CheapskateGoal.fromJson(goal);\n                case \"Get Moving\":\n                    return VerbGoal.fromJson(goal);\n                case \"Over It\":\n                    return VerbPastGoal.fromJson(goal);\n                case \"Shortie\":\n                    return LengthGoal.fromJson(goal);\n                case \"Up Front\":\n                    return StartsWithGoal.fromJson(goal);\n                default:\n                    throw new Error(`Unknown goal type: ${goal.type}`);\n            }\n        });\n    }\n\n    private automation: IAutomationAction[] = [];\n    private loadGameId?: string;\n    private forcePushGameData?: boolean;\n\n    private batonTimeout?: any;\n    private tickInterval?: any;\n    private pollInterval?: any;\n    private automateInterval?: any;\n    private pushImmediate?: any;\n\n    private auth?: IAuth;\n\n    private lastSavedState?: string;\n\n    private pendingDrops: ITile[] = [];\n    private clearDrops: ITile[] = [];\n\n    constructor(props: any) {\n        super(props);\n\n        // This is the local pass-and-play implementation, left here for reference.\n        //\n        // const stateString = sessionStorage.getItem(\"boardState\");\n        // if (stateString) {\n        //   try {\n        //     const state = JSON.parse(stateString) as IAppState;\n        //     App.hydrateAppState(state);\n        //     this.state = state;\n        //     return;\n        //   } catch {\n        //     sessionStorage.clear();\n        //   }\n        // }\n\n        this.loadGameId = sessionStorage.getItem(\"gameId\") || undefined;\n        const menuState: {uiState?: IUiState} = {};\n        const savedMenuState = sessionStorage.getItem(\"uiState\");\n        if (savedMenuState) {\n            menuState.uiState = JSON.parse(savedMenuState);\n        }\n        this.state = {...newGame(), ...{menuState}};\n    }\n\n    public componentDidMount(): void {\n        this.tickInterval = setInterval(this.tick, 100);\n        const query = getQuery();\n        this.loadGameId = query.gameId;\n        this.getToken();\n    }\n\n    public componentDidUpdate(prevProps: any, prevState: any) {\n        //console.log({componentDidUpdate: explainDiff(diff.diff(prevState, this.state))});\n        if (this.myPlayer && localStorage.getItem(PLAYER_NAME_KEY) !== this.myPlayer.name) {\n            localStorage.setItem(PLAYER_NAME_KEY, this.myPlayer.name);\n        }\n        if (!this.auth) {\n            return;\n        }\n        this.ensureParticipant();\n        if (this.state.reordered.length > 0 && (this.state.board.find((e, i) => this.state.original[i] !== e) === undefined)) {\n            this.setState({reordered: [], scooched: undefined});\n        } else {\n            if (this.pushImmediate) {\n                clearTimeout(this.pushImmediate);\n            }\n            this.pushImmediate = setTimeout(this.push, 10);\n        }\n        if (this.state.baton) {\n            if (!this.batonTimeout) {\n                this.batonTimeout = setTimeout(() => this.setState((state) => {\n                    this.batonTimeout = undefined;\n                    if (state.baton && state.baton.timeout < Date.now()) {\n                        return {baton: undefined};\n                    }\n                    return {};\n                }), this.state.baton.timeout - Date.now());\n            }\n        }\n        // Ensure that all participants have the same URL in their window so reloading doesn't start a new game:\n        if (this.state.options.solo !== undefined) {\n            if (window.location.href !== this.gameUrl) {\n                if (window.history.pushState) {\n                    window.history.pushState({path: this.gameUrl}, \"\", this.gameUrl);\n                }\n            }\n        }\n        sessionStorage.setItem(\"uiState\", JSON.stringify(this.state.uiState));\n    }\n\n    public componentWillUnmount(): void {\n        if (this.batonTimeout) {\n            clearTimeout(this.batonTimeout);\n        }\n        if (this.tickInterval) {\n            clearInterval(this.tickInterval);\n        }\n        if (this.pollInterval) {\n            clearInterval(this.pollInterval);\n        }\n        if (this.automateInterval) {\n            clearInterval(this.automateInterval);\n        }\n    }\n\n    public render() {\n        if (this.myPlayer === undefined) {\n            return <Alert><Alert.Heading>Loading</Alert.Heading><p>{this.state.loading}</p></Alert>;\n        }\n        const tileSet = getTileSet(this.state.options.tileSetName);\n        // const totalTiles = tileSet.tiles.map((tile) => tile.count).reduce((a, b) => a + b);\n        // const totalPoints = tileSet.tiles.map((tile) => tile.count * tile.points).reduce((a, b) => a + b);\n        let selectableLetters = Array(...this.state.board);\n        if (this.state.word.length > 0) {\n            selectableLetters = selectableLetters.filter((tile, index) => this.canSelect(index));\n        }\n        let canPlay = false;\n        let playLabel: string | false = this.state.word.length > 0 ? \"Too Short\" : false;\n        if (this.state.word.length > 2) {\n            canPlay = isWord(this.state.word);\n            const word = this.state.word.map((tile) => tile.letter).join(\"\");\n            let points = this.state.word.map(this.tilePoints).reduce((a, b) => (a || 0) + (b || 0));\n            let bonusPoints = this.state.word.map(this.bonusPoints).reduce((a, b) => (a || 0) + (b || 0)) || 0;\n            bonusPoints = bonusPoints + this.state.goals.map((goal) => goal.check(this.pendingMove) ? goal.points : 0).reduce((a, b) => a + b, 0);\n            points = (points || 0) + bonusPoints;\n            if (canPlay) {\n                if (this.state.smeared && LABEL_RELEASE_EXPLICITLY) {\n                    playLabel = `Release to play '${word}' for ${points || \"no\"} points`;\n                } else {\n                    playLabel = `Play '${word}' for ${points || \"no\"} points`;\n                }\n            } else {\n                playLabel = `'${word}' is not a word`;\n            }\n        }\n\n        // If the player was smearing, auto-play if possible.\n        // If the player was tapping letters or scooching, though, don't do anything.\n        let onDone: ((key: string) => void) | undefined;\n        if (this.state.smeared) {\n            if (canPlay) {\n                onDone = this.onPlay;\n            } else {\n                onDone = (id) => {\n                    // TODO: this should probably be an option\n                    // deselect everything if the smear ends on a selected tile and the word's invalid,\n                    // otherwise leave state unchanged (as in the end of a scooch)\n                    // const i = this.state.word.findIndex((tile) => tile.id === id);\n                    // //console.log({ id, word: this.state.word, i });\n                    // if (i >= 0) {\n                    //     this.setState({word: []});\n                    // }\n                };\n            }\n        } else {\n            onDone = undefined;\n        }\n\n        const scoredPlayers = this.state.players.map((player) => {\n            const score = playerScore(player);\n            return {score, ...player};\n        }).sort((a, b) => b.score - a.score);\n        let overHeader = <Alert.Heading>{scoredPlayers[0].name} Wins!</Alert.Heading>;\n        if (scoredPlayers.find((e) => e.score !== scoredPlayers[0].score) === undefined) {\n            overHeader = <Alert.Heading>Its a tie!</Alert.Heading>;\n        }\n\n        const yourPoints = this.state.players[0].words.map((play) => play.type === \"play\" ? play.points + play.bonusPoints : 0).reduce((a, b) => a + b, 0);\n        //const yourTiles = this.state.players[0].words.map((play) => play.type === \"play\" ? play.word.length : 0).reduce((a, b) => a + b, 0);\n        //const targetPoints = (yourTiles / totalTiles) * totalPoints;\n        const yourTargetPoints = this.state.players[0].words\n            .map((play) => play.type === \"play\" ? play.word : [])\n            .reduce((a, b) => a.concat(b), [])\n            .map((playedTile) => playedTile.letter)\n            .map((letter) => tileSet.tiles.find((e) => e.letter === letter)!.points)\n            .reduce((a, b) => a + b, 0) + this.state.players[0].words.length;\n        const stars = yourPoints - yourTargetPoints;\n        let starsString = \"\";\n        for (let i = 0; i < Math.abs(stars); ++i) {\n            starsString += \"\";\n        }\n\n        const gameUrl = this.gameUrl;\n        return <div className={this.itIsMyTurn ? \"\" : \"not-my-turn\"}>\n            {this.renderPlayers()}\n            <div className={phone() ? undefined : \"container-fluid\"}>\n                {this.renderModal()}\n                <Row>\n                    <Col\n                        className={compact([\"col-sm-12\", \"col-xl-6\", \"board-col\", this.state.over && \"over\"]).join(\" \")}>\n                        <div className={\"board-area\"}>\n                        <Row>\n                            <div className=\"play-area\">\n                                {this.state.word.map((item, index) => (\n                                    <div key={index} className=\"tile\">\n                                        <div className=\"field\" style={{\n                                            backgroundImage: `url(${tile})`,\n                                            backgroundSize: \"contain\",\n                                            backgroundRepeat: \"no-repeat\",\n                                        }}>\n                                            <div className=\"points\">{this.tilePoints(item) || <>&nbsp;</>}</div>\n                                            <div className=\"letter\">{item.letter}</div>\n                                            {this.bonusPoints(item) &&\n                                            <div className=\"bonus\">+{this.bonusPoints(item)}</div>}\n                                        </div>\n                                    </div>\n                                ))}\n                                {/* <div style={{marginTop: \"1rem\", textAlign: \"center\", border: \"1px solid black\"}}></div> */}\n                                {this.state.word.length === 0 && <div className=\"tile space\"/>}\n                                <div className=\"container\">\n                                    <div className=\"flex-grow\"/>\n                                </div>\n                            </div>\n                        </Row>\n                        <Row className=\"untouchable\">\n                            {this.state.over &&\n                            <div className=\"overlay\">\n                                <Alert variant=\"success\" width=\"100%\">\n                                    {overHeader}\n                                    Final Score: {\n                                    scoredPlayers.map((player) => `${player.name}: ${player.score}`).join(\", \")\n                                }\n                                </Alert>\n                            </div>}\n                            {this.state.announcements &&\n                            <div className=\"overlay\">\n                                {this.state.announcements.map((a) =>\n                                    <div key={a.key} className=\"announcement\"\n                                         onAnimationEnd={() => this.setState((state) => ({announcements: without(state.announcements, a)}))}>\n                                        <div className=\"title\">{a.title}</div>\n                                        <div className=\"message\">{a.message}</div>\n                                    </div>)}\n                            </div>}\n                            <SlideGrid\n                                className=\"board\"\n                                canExchange={this.canScooch}\n                                tap={this.onClickItem}\n                                done={onDone}\n                                smear={this.onSmear}\n                                exchange={this.onExchange}\n                            >\n                                {\n                                    this.state.board.map((item, index) => {\n                                        const classes = [\"tile\"];\n                                        if (this.state.word.includes(item)) {\n                                            classes.push(\"selected\");\n                                        }\n                                        if (selectableLetters.indexOf(item) >= 0) {\n                                            classes.push(\"selectable\");\n                                        } else {\n                                            classes.push(\"unselectable\");\n                                        }\n                                        if (this.canScooch(item.id)) {\n                                            classes.push(\"swappable\");\n                                        } else {\n                                            classes.push(\"unswappable\");\n                                        }\n                                        if (item.type === \"space\") {\n                                            classes.push(\"space\");\n                                        }\n                                        if (this.reordered(item)) {\n                                            classes.push(\"reordered\");\n                                        }\n                                        if (this.state.options.oneScoochPerTurn && this.state.scooched === item.id) {\n                                            classes.push(\"scooched\");\n                                        }\n                                        if ((index % 4) === 0) {\n                                            classes.push(\"start-row\");\n                                        }\n                                        if (item.drop) {\n                                            classes.push(`drop-${item.drop}`);\n                                            setTimeout(() => item.drop = 0, 1000 + 1000 * item.drop);\n                                        }\n                                        const id = item.id;\n                                        return (\n                                            <div className={classes.join(\" \")} key={id} id={id}>\n                                                <div className=\"field\" style={{\n                                                    backgroundImage: `url(${tile})`,\n                                                    backgroundSize: \"contain\",\n                                                    backgroundRepeat: \"no-repeat\",\n                                                    backgroundColor: \"#ffffff44\",\n                                                    backgroundBlendMode: \"color-burn\",\n                                                }}>\n                                                    <div className=\"points\">{this.tilePoints(item) || <>&nbsp;</>}</div>\n                                                    <div className=\"letter\">{item.letter || <>&nbsp;</>}</div>\n                                                </div>\n                                            </div>\n                                        );\n                                    })\n                                }\n                            </SlideGrid>\n                        </Row>\n                        </div>\n                        {/*<Row className=\"board-footer\">*/}\n                        {/*    <Col sm={4} className=\"sm-right\">*/}\n                        {/*        <>*/}\n                        {/*            {gameUrl && this.state.players && this.state.players.length < 2 &&*/}\n                        {/*            <Button variant={this.state.options.solo ? \"outline-primary\" : \"primary\"}*/}\n                        {/*                    onClick={this.showInvite}>Invite a*/}\n                        {/*                Friend</Button>}*/}\n                        {/*            /!* Solo Mode: {stars > 0 && \"+\"}{stars} *!/*/}\n                        {/*            <span*/}\n                        {/*                className={`stars ${stars >= 0 ? \"positive\" : \"negative\"}`}>{starsString}</span>*/}\n                        {/*            /!* Solo Mode: {yourPoints} / {yourTargetPoints} *!/*/}\n                        {/*        </>*/}\n                        {/*    </Col>*/}\n                        {/*    <Col sm={4} className=\"sm-left\">*/}\n                        {/*        {this.state.bag.length} tiles left*/}\n                        {/*    </Col>*/}\n                        {/*</Row>*/}\n\n                        <GoalListComponent mode={\"horizontal\"} goals={this.state.goals} pendingMove={this.pendingMove}\n                                           canPlay={canPlay} board={this.state.board}/>\n                    </Col>\n                </Row>\n            </div>\n            <FooterComponent canReset={this.canReset} {...this.canNuke()} canPlay={canPlay} canPass={this.canPass}\n                             passWillEndGame={this.passWillEndGame}\n                             playLabel={playLabel}\n                             menu={this.showMenu} reset={this.onReset}\n                             nuke={this.onNuke} play={this.onPlay} pass={this.onPass}/>\n        </div>;\n    }\n\n    private showInvite = () => {\n        this.changeOptions(() => ({solo: undefined}));\n    }\n\n    private getToken = () => {\n        if (this.auth) {\n            return;\n        }\n        const password = this.deviceIdentifier;\n        const userId = this.authUserId;\n        if (userId === undefined) {\n            this.setState({loading: \"register-device\"}, () =>\n                fetch(\"https://api.zynga.com/auth/registerDevice\",\n                    {\n                        method: \"POST\",\n                        body: JSON.stringify({password, appId: APP_ID}),\n                        headers: {\"Content-Type\": \"application/json\"},\n                    })\n                    .then((response) => response.json())\n                    .then((auth: IAuth) => {\n                        //console.log({registerDevice: auth});\n                        localStorage.setItem(\"DeviceIdentifier\", password);\n                        localStorage.setItem(\"AuthUserId\", auth.userId);\n                        this.getToken();\n                    })\n                    .catch(console.error));\n            return;\n        }\n        this.setState({loading: \"authenticating\"}, () =>\n            fetch(\"https://api.zynga.com/auth/issueToken\",\n                {\n                    method: \"POST\",\n                    body: JSON.stringify({password, userId, appId: APP_ID}),\n                    headers: {\"Content-Type\": \"application/json\"},\n                })\n                .then((response) => {\n                    if (response.status < 400) {\n                        return response.json();\n                    } else {\n                        console.error(response);\n                        throw new Error(response.statusText);\n                    }\n                })\n                .then((token) => {\n                    if (token) {\n                        //console.log({issueToken: token});\n                        this.auth = {\n                            password, userId, ...token,\n                        };\n                        this.onAuthenticated();\n                    } else {\n                        throw new Error(\"no json body\");\n                    }\n                })\n                .catch(console.error));\n    }\n\n    private onAuthenticated = () => {\n        this.pollInterval = setInterval(this.poll, 5000);\n        this.automateInterval = setInterval(this.automate, 1000);\n        const gameId = this.loadGameId;\n        if (gameId) {\n            this.setState({loading: \"joining-game\", uiState: {}}, () =>\n                this.pullGameData(gameId));\n        }\n    }\n\n    private poll = () => {\n        if (!this.auth) {\n            return;\n        }\n        const gameId = this.loadGameId || this.state.gameId;\n        if (gameId) {\n            this.setState({loading: \"loading-game\"}, () =>\n                this.pullGameData(gameId));\n        }\n    }\n\n    private pullGameData(gameId: string) {\n        if (!this.auth) {\n            return;\n        }\n        fetch(\"https://api.zynga.com/conversation/join\",\n            {\n                method: \"POST\",\n                headers: {\"Content-Type\": \"application/json\", \"Authorization\": \"token \" + this.auth.token},\n                body: JSON.stringify({\n                    accessType: \"public\",\n                    id: gameId,\n                }),\n            })\n            .then((response) => response.json())\n            .then((response) => {\n                const {baton, gameStateVersion, boardState} = response.meta;\n                this.batonTimeout = undefined;\n                if (typeof boardState === \"string\" && gameStateVersion > this.state.gameStateVersion) {\n                    console.warn(`Pulled Game State: gameStateVersion ${this.state.gameStateVersion} => ${gameStateVersion}`);\n                    const state: IAppState = JSON.parse(boardState) as IAppState;\n                    const rawState: IAppState = JSON.parse(boardState) as IAppState;\n                    App.hydrateAppState(state);\n                    //console.log(explainDiff(diff.diff(rawState, state)));\n                    this.setState({...state, baton, gameStateVersion, loading: \"ready\"} as any);\n                    return;\n                } else {\n                    this.setState({loading: \"ready\", baton}, this.ensureParticipant);\n                }\n            })\n            .catch(console.error);\n    }\n\n    private push = () => {\n        if (!this.auth) {\n            return;\n        }\n        const token = this.auth.token;\n        const updateProhibited = this.gameStateLocked;\n        const newBaton = {\n            userId: this.myUserId!,\n            timeout: Date.now() + 1000,\n        };\n        const boardStateSource = this.stateToJson(this.state);\n        const boardState = JSON.stringify(boardStateSource);\n        let needsPush = false;\n        if (this.lastSavedState) {\n            const stateDiff = diff.diff(JSON.parse(this.lastSavedState), JSON.parse(boardState));\n            //console.log({pushDiff: explainDiff(stateDiff)});\n            needsPush = !!stateDiff;\n        } else {\n            needsPush = true;\n        }\n        if (needsPush) {\n            //console.log(\"push!\");\n            if (!updateProhibited) {\n                this.forcePushGameData = false;\n                this.lastSavedState = boardState;\n                const {gameId} = this.state;\n                const gameStateVersion = this.state.gameStateVersion + 1;\n                fetch(\"https://api.zynga.com/conversation/join\",\n                    {\n                        method: \"POST\",\n                        headers: {\"Content-Type\": \"application/json\", \"Authorization\": \"token \" + token},\n                        body: JSON.stringify({\n                            accessType: \"public\",\n                            id: gameId,\n                        }),\n                    })\n                    .then((response) => response.json())\n                    .then((response) => {\n                        //console.log({join: response});\n                        sessionStorage.setItem(\"gameId\", response.id);\n                        // TODO: check our gameStateVersion against the one in the current meta to make sure we're not rewinding time.\n                        return fetch(\"https://api.zynga.com/conversation/editConversationMeta\",\n                            {\n                                method: \"POST\",\n                                headers: {\"Content-Type\": \"application/json\", \"Authorization\": \"token \" + token},\n                                body: JSON.stringify({\n                                    accessType: \"public\",\n                                    id: gameId,\n                                    meta: {baton: newBaton, gameStateVersion, boardState},\n                                }),\n                            });\n                    })\n                    .then((response) => response.json())\n                    .then((response) => {\n                        //console.log({update: response});\n                        this.batonTimeout = undefined;\n                        this.setState({baton: newBaton, gameStateVersion});\n                    })\n                    .catch(console.error);\n            } else {\n                console.warn({\n                    stateChangesWhileNotMyTurn: {\n                        ...this.state,\n                        loading: \"saved\", baton: undefined,\n                        auth: undefined, gameStateVersion: undefined,\n                    }, lastSavedState: this.lastSavedState && JSON.parse(this.lastSavedState),\n                });\n            }\n        }\n    }\n\n    private stateToJson(baseState: IAppState) {\n        return omit(baseState, \"loading\", \"uiState\", \"baton\", \"auth\", \"gameStateVersion\");\n    }\n\n    private ensureParticipant() {\n        const myPlayer = this.myPlayer;\n        if (myPlayer === undefined) {\n            const players = this.state.players;\n            const unassignedPlayer = players.find((e) => e.userId === undefined);\n            if (unassignedPlayer) {\n                unassignedPlayer.userId = this.myUserId;\n            } else {\n                players.push({name: localStorage.getItem(PLAYER_NAME_KEY) || DEFAULT_PLAYER_NAME, words: []});\n                this.forcePushGameData = true;\n            }\n            this.setState({players});\n        }\n    }\n\n    private renderPlayers() {\n        let {players} = this.state;\n        if (players.length === 1) {\n            players = [...players, {\n                name: \"INVITE\",\n                words: [],\n            }];\n        }\n        return <Row className={\"players\"}>\n            <Col xs={12} className=\"header-turn-indicator\">\n                <Col className=\"flex-grow\"/>\n                <Col xs={\"auto\"}>\n                    {this.itIsMyTurn ? \"Your Turn\" : `${this.currentPlayer.name}s Turn`}\n                </Col>\n                <Col className=\"flex-grow\"/>\n            </Col>\n            {players.map((player, index) => {\n                const leftSide = index < players.length / 2;\n                const image = player.name !== \"INVITE\" && <div className=\"flex-shrink\">\n                    <Image src={zynga} roundedCircle={true}/>\n                </div>;\n                const isMe = player === this.myPlayer;\n                const name = isMe ? \"You\" : player.name;\n                let lastWord: JSX.Element | string | undefined;\n                if (this.state.word.length > 0) {\n                  lastWord = undefined;\n                } else if (player.words.length > 0) {\n                    const move = player.words[player.words.length - 1];\n                    switch (move.type) {\n                        case \"play\":\n                            const word = move.word.map((t) => t.letter).join(\"\");\n                            const points = (move.points || 0) + (move.bonusPoints || 0);\n                            const pointsWord = points === 0 ? \"no points\" : points === 1 ? \"one point\" : `${points} points`;\n                            lastWord = <>played <b>{word}</b> for {pointsWord}</>;\n                            break;\n                        case \"nuke\":\n                            lastWord = \"nuked\";\n                            break;\n                        case \"pass\":\n                            lastWord = \"passed\";\n                            break;\n                    }\n                } else {\n                    lastWord = undefined;\n                }\n                const nameAndScore = <Col className=\"flex-grow\">\n                    <Row className=\"name\"><Col>{\n                        player.name !== \"INVITE\"\n                            ? name\n                            : <Button className={this.state.options.solo ? \"btn-solid-outline\" : undefined}\n                                      variant={this.state.options.solo ? \"outline-primary\" : \"primary\"}\n                                      onClick={this.showInvite}>\n                                Invite a Friend\n                            </Button>}</Col></Row>\n                    <Row className=\"score\"><Col>{player.name !== \"INVITE\" && playerScore(player)}</Col></Row>\n                    {lastWord && !isMe && this.currentPlayer !== player && <Row className=\"last-word\"><Col>{lastWord}</Col></Row>}\n                </Col>;\n                return <Col key={index} xs={12 / players.length} className={`player ${leftSide ? \"left\" : \"right\"}`}>\n                    <Row>\n                        {leftSide && image}\n                        {nameAndScore}\n                        {!leftSide && image}\n                    </Row>\n                </Col>;\n            })}\n        </Row>;\n    }\n\n    private renderModal() {\n        const {uiState, options, players} = this.state;\n        const {gameUrl, myPlayer} = this;\n        if (uiState.splashOpen) {\n            return this.renderSplashScreen(myPlayer);\n        }\n        const qrDialog = players && players.length < 2 && options.solo === undefined;\n        if (qrDialog && gameUrl && myPlayer) {\n            return this.renderQrDialog(gameUrl, myPlayer);\n        }\n        const mainMenu = uiState.mainMenuOpen;\n        if (mainMenu) {\n            return this.renderMainMenu();\n        }\n        const helpMenu = uiState.helpOpen;\n        if (helpMenu) {\n            return this.renderHelp(helpMenu);\n        }\n        return false;\n    }\n\n    private hideSplash = (callback: ()=>void) => {\n        this.setState((state) => {\n            const uiState = {\n                ...state.uiState,\n                splashOpen: false,\n            };\n            const newState = {...state, uiState};\n            return newState;\n        }, callback);\n    }\n\n    private renderSplashScreen(player: IPlayer | undefined) {\n        return <SplashScreenComponent\n            playerName={player && player.name}\n            changePlayerName={player ? (value) => {\n                player.name = value;\n                this.setState((state) => {\n                    const players = Array(...state.players);\n                    return {players};\n                });\n            } : undefined}\n            solo={() => this.hideSplash(this.goSolo)}\n            challenge={() => this.hideSplash(this.goChallenge)}\n        />;\n    }\n\n    private renderQrDialog(gameUrl: string, player: IPlayer) {\n        return <InviteComponent\n            gameUrl={gameUrl} playerName={player.name}\n            changePlayerName={(value) => {\n                player.name = value;\n                this.setState((state) => {\n                    const players = Array(...state.players);\n                    return {players};\n                });\n            }}\n            dismiss={this.goSolo}\n            play={this.goChallenge}\n        />;\n    }\n\n    private goChallenge = () => {\n        return this.changeOptions(() => ({solo: undefined}));\n    }\n\n    private goSolo = () => {\n        return this.changeOptions(() => ({solo: true}));\n    }\n\n    private renderMainMenu() {\n        const passWillResign = this.passWillEndGame;\n\n        return <MainMenuComponent\n            show={!!this.state.uiState.mainMenuOpen} hide={this.hideMenu}\n\n            help={this.showHelp}\n\n            canPass={this.canPass}\n            passWillEndGame={passWillResign}\n            pass={this.onPass}\n\n            canReset={this.canReset}\n            reset={this.onReset}\n\n            {...this.canNuke()}\n            nuke={this.onNuke}\n        />;\n    }\n\n    private renderHelp(helpOpen: boolean | RulesPanelKey) {\n        const {changeOptions, tileSet, resetOptions, hideHelp, state} = this;\n        const {bag, options} = state;\n        return <RulesComponent\n            show={helpOpen}\n            onHide={hideHelp}\n            tileSet={tileSet}\n            bag={bag}\n            options={options}\n            changeOptions={changeOptions}\n            resetOptions={resetOptions}/>;\n    }\n\n    private onExchange = (a: string, b: string) => {\n        this.setState((state) => {\n            const aIndex = state.board.findIndex((e) => e.id === a);\n            const bIndex = state.board.findIndex((e) => e.id === b);\n            const board: ITile[] = [];\n            const reordered: ITile[] = Array(...state.reordered);\n            state.board.forEach((tile, index) => {\n                let newIndex = index;\n                if (index === aIndex) {\n                    newIndex = bIndex;\n                } else if (index === bIndex) {\n                    newIndex = aIndex;\n                }\n                if (newIndex !== index && !reordered.includes(tile)) {\n                    reordered.push(tile);\n                }\n                board[newIndex] = tile;\n            });\n            return {board, reordered, scooched: a};\n        });\n    }\n\n    private canNuke() {\n        const usedNuke = this.state.nukers.includes(this.state.playerIndex);\n        const noMoreTiles = this.state.bag.length === 0;\n        const canNuke = !usedNuke && !noMoreTiles;\n        return {usedNuke, noMoreTiles, canNuke};\n    }\n\n    private changeOptions = (change: (options: IScoochOptions) => IScoochOptions) => {\n        this.setState((state) => ({options: change(state.options)}));\n    }\n\n    private resetOptions = () => {\n        this.setState({options: DEFAULT_OPTIONS});\n    }\n\n    private canSelect = (index: number) => {\n        if (this.state.word.length === 0) {\n            return true;\n        }\n        const seedTile = this.state.word[this.state.word.length - 1];\n        const seed = this.state.board.findIndex((tile) => tile === seedTile);\n        const indexRow = Math.floor(index / 4);\n        const seedRow = Math.floor(seed / 4);\n        if (indexRow === seedRow) {\n            return Math.abs(index - seed) === 1;\n        } else {\n            if (Math.abs(indexRow - seedRow) === 1) {\n                return Math.abs(index % 4 - seed % 4) <= 1;\n            }\n            return false;\n        }\n    }\n\n    private getTile(key: string) {\n        return this.state.board.find((e) => e.id === key); // || this.state.bag.find((e) => e.id === key);\n    }\n\n    private getIndex(key: string) {\n        return this.state.board.findIndex((e) => e.id === key); // || this.state.bag.find((e) => e.id === key);\n    }\n\n    private canScooch = (keyA: string, keyB?: string) => {\n        if (this.state.options.oneScoochPerTurn && this.state.scooched && ![keyA, keyB].includes(this.state.scooched)) {\n            return false;\n        }\n        const a = this.getIndex(keyA);\n        if (a < 0 || this.state.word.indexOf(this.state.board[a]) >= 0) {\n            return false;\n        }\n        if (this.state.board[a].type !== \"letter\") {\n            return false;\n        }\n        if (!keyB) {\n            return true;\n        }\n        const b = this.getIndex(keyB);\n        if (b < 0 || this.state.word.indexOf(this.state.board[b]) >= 0) {\n            return false;\n        }\n        if (this.state.board[b].type !== \"letter\") {\n            return false;\n        }\n        const indexRow = Math.floor(b / 4);\n        const seedRow = Math.floor(a / 4);\n        if (indexRow === seedRow) {\n            return Math.abs(b - a) === 1;\n        } else {\n            if (Math.abs(indexRow - seedRow) === 1) {\n                return b % 4 === a % 4;\n            }\n            return false;\n        }\n    }\n\n    private tick = () => {\n        if (this.myPlayer === undefined) {\n            return;\n        }\n        for (let i = this.state.board.length - 1; i >= 0; i--) {\n            const space = this.state.board[i];\n            if (space.type === \"drop\") {\n                this.setState((state) => {\n                    const board = Array(...state.board);\n                    const bag = Array(...state.bag);\n                    i = board.indexOf(space);\n                    if (i >= 0) {\n                        if (state.bag.length > 0) {\n                            const j = Math.floor(Math.random() * state.bag.length);\n                            board[i] = bag.splice(j, 1)[0];\n                            this.drop(board[i], space.drop);\n                        } else {\n                            board[i].type = \"space\";\n                        }\n                    }\n                    return {bag, board, original: Array(...board)};\n                });\n                break;\n            }\n        }\n        if (this.pendingDrops.length === 0 && this.clearDrops.length > 0) {\n            while (this.clearDrops.length > 0) {\n                this.clearDrops.pop()!.drop = 0;\n            }\n            console.warn(\"tickForceUpdate\");\n            this.forceUpdate();\n            return;\n        }\n    }\n\n    private automate = () => {\n        if (this.myPlayer === undefined) {\n            return;\n        }\n        const {goals} = this.state;\n        if (goals.length < 3) {\n            const availableLetters = compact([...this.state.bag.map((e) => e.letter), ...this.state.board.map((e) => e.letter)]);\n            switch (Math.floor(Math.random() * 6)) {\n                case 0:\n                    goals.push(new CheapskateGoal());\n                    break;\n                case 1:\n                    goals.push(new VerbGoal());\n                    break;\n                case 2:\n                    goals.push(new VerbPastGoal());\n                    break;\n                case 3:\n                    goals.push(new DoublesGoal(sample(\"RSTLNE\")!));\n                    break;\n                case 4:\n                    if (availableLetters.length > 0) {\n                        goals.push(new StartsWithGoal(sample(availableLetters)!));\n                    }\n                    break;\n                case 5:\n                    goals.push(new LengthGoal(sample([3, 4])!));\n                    break;\n            }\n            this.setState({goals: uniqBy(goals, JSON.stringify)});\n            return;\n        }\n\n        const automation = this.automation.shift();\n        if (automation) {\n            switch (automation.type) {\n                case \"tap\":\n                    this.onClickItem(automation.a, false);\n                    return;\n                case \"wait\":\n                    return;\n                case \"nuke\":\n                    this.onNuke();\n                    return;\n                case \"pass\":\n                    this.onPass();\n                    return;\n                case \"submit\":\n                    this.onPlay();\n                    return;\n                default:\n                    console.error({automation});\n                    return;\n            }\n        }\n\n        const {board, players, playerIndex} = this.state;\n        const {canNuke} = this.canNuke();\n        const currentPlayer = players[playerIndex];\n        if (currentPlayer.automated) {\n            if (!board.some((t) => t.type === \"drop\")) {\n                const possibilities: Array<[number, ITile[]]> = [];\n                new WordFinder(board, 4, (word) => {\n                    if (word.length >= 3) {\n                        const points: number = word.map((e) => e.points).reduce((a, b) => a + b, 0);\n                        possibilities.push([points, word]);\n                    }\n                }).findWords();\n                possibilities.sort((a, b) => a[0] - b[0]);\n                const play = possibilities.pop();\n                //console.log({possibilities});\n                if (play !== undefined) {\n                    this.automation = play[1].map((e) => ({\n                        type: \"tap\",\n                        a: e.id,\n                    }));\n                    this.automation.push({type: \"wait\"});\n                    this.automation.push({type: \"submit\"});\n                } else if (canNuke) {\n                    this.automation.push({type: \"nuke\"});\n                } else {\n                    this.automation.push({type: \"pass\"});\n                }\n            }\n        }\n    }\n\n    private reordered = (tile: ITile) => {\n        return this.state.reordered.includes(tile);\n    }\n\n    private tilePoints = (tile: ITile): number | undefined => {\n        if (this.reordered(tile)) {\n            return undefined;\n        }\n        return tile.points;\n    }\n\n    private bonusPoints = (tile: ITile): number | undefined => {\n        if (!this.state.options.bonusForLongerWords) {\n            return undefined;\n        }\n        const index = this.state.word.indexOf(tile);\n        if (this.state.options.bonusForLongerWords === \"constant\") {\n            if (index < 4) {\n                return undefined;\n            }\n            return 1;\n        }\n        if (index < 3) {\n            return undefined;\n        }\n        return index - 2;\n    }\n\n    private tileSelected = (tile: ITile, word?: ITile[]) => {\n        if (word === undefined) {\n            word = this.state.word;\n        }\n        return word.includes(tile);\n    }\n\n    private onSmear = (key: string) => {\n        const id = key;\n        const tile = this.state.board.find((tile) => tile.id.toString() === id);\n        if (tile) {\n            const index = this.state.board.indexOf(tile);\n            if (!this.tileSelected(tile)) {\n                if (this.canSelect(index)) {\n                    this.onClickItem(key, true);\n                }\n            } else {\n                const preserveIndex = this.state.word.indexOf(tile);\n                const tileToDeselect = this.state.word[preserveIndex + 1];\n                if (tileToDeselect) {\n                    this.onClickItem(tileToDeselect.id, true);\n                }\n            }\n        }\n    }\n\n    private onClickItem = (key: string, smeared: boolean = false) => {\n        const id = key;\n        const tile = this.state.board.find((tile) => tile.id.toString() === id);\n        if (tile) {\n            const index = this.state.board.indexOf(tile);\n            if (this.tileSelected(tile) || this.canSelect(index)) {\n                this.setState((state) => {\n                    const word = Array(...state.word);\n                    if (this.tileSelected(tile, word)) {\n                        while (this.tileSelected(tile, word)) {\n                            word.pop();\n                        }\n                    } else {\n                        word.push(tile);\n                    }\n                    return {word, smeared};\n                });\n            }\n        }\n    }\n\n    private showMenu = () => {\n        this.setState(() => ({uiState: {mainMenuOpen: true}}));\n    }\n\n    private hideMenu = (callback: () => void) => {\n        this.setState(() => ({uiState: {mainMenuOpen: false}}), callback);\n    }\n\n    private showHelp = (section: RulesPanelKey) => {\n        console.log({section});\n        this.setState(() => ({uiState: {helpOpen: section}}));\n    }\n\n    private hideHelp = () => {\n        this.setState(() => ({uiState: {helpOpen: false}}));\n    }\n\n    private onReset = () => {\n        this.setState((state) => {\n            return {word: [], board: state.original, reordered: [], scooched: undefined};\n        });\n    }\n\n    private onNuke = () => {\n        this.setState((state) => {\n            const board: ITile[] = [];\n            for (let j = 0; j < 16; j++) {\n                board.push({\n                    type: \"drop\",\n                    id: `blank-${j}`,\n                } as ITile);\n            }\n            const bag: ITile[] = Array(...state.bag);\n            state.board.forEach((tile) => {\n                if (tile.type === \"letter\") {\n                    bag.push(tile);\n                }\n            });\n            const playerIndex = state.playerIndex;\n            const nukers = Array(...state.nukers);\n            nukers.push(playerIndex);\n            const players = Array(...state.players);\n            players[playerIndex].words.push({type: \"nuke\"});\n            return {nukers, bag, board, scooched: undefined};\n        });\n    }\n\n    private onPass = () => {\n        this.setState((state) => {\n            let playerIndex = state.playerIndex;\n            const passers = Array(...state.passers);\n            if (passers.includes(playerIndex)) {\n                return {...state, word: [], board: state.original, reordered: [], over: true};\n            } else {\n                passers.push(playerIndex);\n                const players = Array(...state.players);\n                players[playerIndex].words.push({type: \"pass\"});\n                playerIndex = (playerIndex + 1) % state.players.length;\n                return {\n                    ...state,\n                    word: [],\n                    board: state.original,\n                    reordered: [],\n                    playerIndex,\n                    passers,\n                    scooched: undefined,\n                };\n            }\n        });\n    }\n\n    private onPlay = () => {\n        this.setState((state) => {\n            const board = Array(...state.board);\n            const word = Array(...state.word);\n            const playedWord: IPlayedTile[] = [];\n            let points = 0;\n            let bonusPoints = 0;\n            while (word.length > 0) {\n                const tile = word.pop()!;\n                const letter = tile.letter;\n                const tilePoints = this.tilePoints(tile);\n                const tileBonusPoints = this.bonusPoints(tile);\n                playedWord.unshift({id: tile.id, letter, points: tilePoints, bonusPoints: tileBonusPoints});\n                points += (tilePoints || 0);\n                bonusPoints += (tileBonusPoints || 0);\n                let seed = board.indexOf(tile);\n                const drops: ITile[] = [];\n                while (seed >= 0) {\n                    const drop = seed - 4;\n                    if (drop >= 0) {\n                        board[seed] = board[drop];\n                        board[seed].drop++;\n                    } else {\n                        board[seed] = {type: \"drop\", id: `dropping-${tile.id}`, drop: board[seed].drop + 1} as ITile;\n                    }\n                    drops.push(board[seed]);\n                    seed = drop;\n                }\n                drops.forEach((tile) => this.drop(tile, tile.drop));\n            }\n            const players = Array(...state.players);\n            const player = players[state.playerIndex];\n            const playMove: IPlay = {\n                type: \"play\",\n                word: playedWord,\n                points,\n                bonusPoints,\n                goals: [],\n            };\n            player.words.push(playMove);\n            this.state.goals.forEach((goal) => {\n                if (goal.check(playMove)) {\n                    this.announceGoal(goal);\n                    playMove.goals.push(goal);\n                    playMove.bonusPoints += goal.points;\n                }\n            });\n            const goals = without(this.state.goals, ...playMove.goals);\n            const playerIndex = (state.playerIndex + 1) % players.length;\n            return {\n                board,\n                word,\n                players,\n                playerIndex,\n                original: Array(...board),\n                reordered: [],\n                passers: [],\n                scooched: undefined,\n                goals,\n            };\n        });\n    }\n\n    private announceGoal(goal: IGoal) {\n        this.announce(`${goal.type} +${goal.points}`, goal.description);\n    }\n\n    private drop(tile: ITile, distance: number) {\n        this.pendingDrops.push(tile);\n        tile.drop = distance;\n        setTimeout(() => {\n            const i = this.pendingDrops.indexOf(tile);\n            this.pendingDrops.splice(i, 1);\n            this.clearDrops.push(tile);\n        }, tile.drop * 1000);\n    }\n\n    private announce(title: string, message: string) {\n        this.setState((state) => {\n            const {announcements} = state;\n            announcements.push({title, message, key: ++UID});\n            return {announcements};\n        });\n    }\n}\n\nexport default App;\n","import Modal from \"react-bootstrap/Modal\";\nimport \"Menus.css\";\nimport MenuItemComponent from \"./MenuItemComponent\";\nimport * as React from \"react\";\nimport infoIcon from 'assets/icon_info.svg';\nimport nukeIcon from 'assets/icon_nuke.png';\nimport passIcon from 'assets/icon_pass.png';\nimport resetIcon from 'assets/icon_reset.png';\nimport resignIcon from 'assets/icon_resign.svg';\nimport tileBagIcon from 'assets/icon_tileBag.svg';\nimport tile from \"tile.svg\";\nimport {RulesPanelKey} from \"./RulesComponent\";\n\ninterface IMainMenuProps {\n    show: boolean;\n    hide(callback: () => void): void;\n\n    help(section: RulesPanelKey): void;\n\n    canReset: boolean;\n    reset(): void;\n\n    usedNuke: boolean;\n    noMoreTiles: boolean;\n    nuke(): void;\n\n    canPass: boolean;\n    passWillEndGame: boolean;\n    pass(): void;\n}\n\nexport default class MainMenuComponent extends React.Component<IMainMenuProps> {\n    public render() {\n        const {show, hide,\n\n            help,\n\n            canReset, reset,\n            canPass, passWillEndGame, pass,\n\n            usedNuke, noMoreTiles, nuke} = this.props;\n\n        let nukeTitle = \"Discard all tiles and draw new ones. You may only do this once per game.\";\n        if (usedNuke) {\n            nukeTitle = \"You may only use the nuclear option once per game.\";\n        } else if (noMoreTiles) {\n            nukeTitle = \"Its too late to use the nuclear option.\";\n        }\n\n        return <Modal className=\"menu main-menu\" show={show} onHide={() => hide(() => {/**/})} backdrop={true}>\n            <Modal.Body>\n                <MenuItemComponent\n                    title={\"How to Play\"}\n                    description={\"Getting started and rules of the game\"}\n                    icon={infoIcon}\n                    onClick={() => hide(() => help(RulesPanelKey.howToPlay))}\n                />\n\n                <MenuItemComponent\n                    title={\"Dictionary\"}\n                    description={\"Information about which words are acceptable\"}\n                    icon={tileBagIcon}\n                    onClick={() => hide(() => help(RulesPanelKey.dictionary))}\n                />\n\n                <MenuItemComponent\n                    title={\"Tile Distribution\"}\n                    description={\"How many tiles there are of each letter and how many remain in the bag\"}\n                    icon={tileBagIcon}\n                    onClick={() => hide(() => help(RulesPanelKey.helpTiles))}\n                />\n\n                <MenuItemComponent\n                    title={\"Reset\"}\n                    description={\"Return tiles to their original positions, restoring their point values.\"}\n                    icon={resetIcon}\n                    disabled={!canReset}\n                    onClick={() => hide(reset)}\n                />\n\n                <MenuItemComponent\n                    title={passWillEndGame ? \"Pass\" : \"Finish\"}\n                    description={passWillEndGame ? \"Finish the game\" : \"No moves? Pass your turn\"}\n                    icon={passIcon}\n                    disabled={!canPass}\n                    onClick={() => hide(pass)}\n                />\n\n                <MenuItemComponent\n                    title={\"Nuke\"}\n                    description={nukeTitle}\n                    icon={nukeIcon}\n                    badge={usedNuke ? 0 : 1}\n                    disabled={usedNuke}\n                    onClick={() => hide(nuke)}\n                />\n\n                {/*<MenuItemComponent*/}\n                {/*    title={\"Resign\"}*/}\n                {/*    description={\"End this game, but it counts as a loss\"}*/}\n                {/*    icon={resignIcon}*/}\n                {/*    disabled={true}*/}\n                {/*    onClick={() => hide(resign)}*/}\n                {/*/>*/}\n            </Modal.Body>\n        </Modal>;\n    }\n}\n","import {observable} from \"mobx\";\n\nexport interface ITileDefinition {\n  letter: string;\n  count: number;\n  points: number;\n}\n\nexport class TileDefinition implements ITileDefinition {\n  @observable\n  public letter: string;\n\n  @observable\n  public count: number;\n\n  @observable\n  public points: number;\n\n  constructor(props: ITileDefinition) {\n    this.letter = props.letter;\n    this.count = props.count;\n    this.points = props.points;\n  }\n}\n\nexport interface ITileSet {\n  name: string;\n  tiles: ITileDefinition[];\n}\n\nexport class TileSet implements ITileSet {\n  @observable\n  public name: string;\n  \n  @observable\n  public tiles: ITileDefinition[];\n\n  constructor(name?: string, tiles?: ITileDefinition[]) {\n    this.name = name || \"Untitled\";\n    this.tiles = tiles || [];\n  }\n}\n\nconst DefaultTileDefinitions = [\n{\n    letter: \"A\",\n    count: 9,\n    points: 1,\n  },\n  {\n    letter: \"B\",\n    count: 2,\n    points: 4,\n  },\n  {\n    letter: \"C\",\n    count: 2,\n    points: 4,\n  },\n  {\n    letter: \"D\",\n    count: 5,\n    points: 2,\n  },\n  {\n    letter: \"E\",\n    count: 13,\n    points: 1,\n  },\n  {\n    letter: \"F\",\n    count: 2,\n    points: 4,\n  },\n  {\n    letter: \"G\",\n    count: 3,\n    points: 3,\n  },\n  {\n    letter: \"H\",\n    count: 4,\n    points: 3,\n  },\n  {\n    letter: \"I\",\n    count: 6,\n    points: 1,\n  },\n  {\n    letter: \"J\",\n    count: 1,\n    points: 10,\n  },\n  {\n    letter: \"K\",\n    count: 1,\n    points: 5,\n  },\n  {\n    letter: \"L\",\n    count: 4,\n    points: 2,\n  },\n  {\n    letter: \"M\",\n    count: 2,\n    points: 4,\n  },\n  {\n    letter: \"N\",\n    count: 5,\n    points: 2,\n  },\n  {\n    letter: \"O\",\n    count: 8,\n    points: 1,\n  },\n  {\n    letter: \"P\",\n    count: 2,\n    points: 4,\n  },\n  {\n    letter: \"Q\",\n    count: 1,\n    points: 10,\n  },\n  {\n    letter: \"R\",\n    count: 6,\n    points: 1,\n  },\n  {\n    letter: \"S\",\n    count: 5,\n    points: 1,\n  },\n  {\n    letter: \"T\",\n    count: 7,\n    points: 1,\n  },\n  {\n    letter: \"U\",\n    count: 4,\n    points: 2,\n  },\n  {\n    letter: \"V\",\n    count: 2,\n    points: 5,\n  },\n  {\n    letter: \"W\",\n    count: 2,\n    points: 4,\n  },\n  {\n    letter: \"X\",\n    count: 1,\n    points: 8,\n  },\n  {\n    letter: \"Y\",\n    count: 2,\n    points: 3,\n  },\n  {\n    letter: \"Z\",\n    count: 1,\n    points: 10,\n  },\n].map((e) => new TileDefinition(e));\n\nconst DefaultTileSet: ITileSet = new TileSet(\"Default\",  DefaultTileDefinitions)\n\nexport default [DefaultTileSet];\n","import { ITile } from 'App';\nimport { getPrefixInfo } from './isWord';\n\nexport default class WordFinder {\n    private board: ITile[];\n    private width: number;\n    private onWordFound: (word: ITile[]) => void;\n\n    constructor(board: ITile[], width: number, onWordFound: (word: ITile[]) => void) {\n        this.board = board;\n        this.width = width;\n        this.onWordFound = onWordFound;\n    }\n\n    public findWords() {\n        for (let y = 0; y < this.board.length / this.width; y++) {\n            for (let x = 0; x < this.width; x++) {\n                const seed = this.width * y + x;\n                this.search(seed, []);\n            }            \n        }\n    }\n\n    private adjacent(pos: number) {\n        const {board, width} = this;\n        const x = pos % width;\n        const y = (pos - x) / width;\n        const result: number[] = [];\n        if (x > 0) {\n            result.push(pos - 1);\n            if (y > 0) {\n                result.push(pos - 1 - width);\n            }\n            if (y < (board.length / width) - 1) {\n                result.push(pos - 1 + width);\n            }\n        }\n        if (y > 0) {\n            result.push(pos - width);\n        }\n        if (x < width - 1) {\n            result.push(pos + 1);\n            if (y > 0) {\n                result.push(pos + 1 - width);\n            }\n            if (y < (board.length / width) - 1) {\n                result.push(pos + 1 + width);\n            }\n        }\n        if (y < (board.length / width) - 1) {\n            result.push(pos + width);\n        }\n        return result;\n    }\n\n    private adjacentFree(pos: number, word: ITile[]) {\n        return this.adjacent(pos).filter((e) => {\n            const tile = this.board[e];\n            if (tile.type !== \"letter\") {\n                return false;\n            }\n            if (word.includes(tile)) {\n                return false;\n            }\n            return true;\n        });\n    }\n\n    private search(pos: number, word: ITile[]) {\n        const tile = this.board[pos];\n        if (tile.type !== \"letter\") {\n            return;\n        }\n        word.push(tile);\n        const info = getPrefixInfo(word);\n        if (info === undefined) {\n            return;\n        }\n        if (info === true || info.valid) {\n            this.onWordFound(word);\n        }\n        if (info !== true) {\n            const af = this.adjacentFree(pos, word);\n            af.forEach((nextPos) => {\n                const nextTile = this.board[nextPos];\n                if (info.next.includes(nextTile.letter.toLowerCase())) {\n                    this.search(nextPos, [...word]);\n                }\n            });\n        }\n    }\n}\n","import Modal from \"react-bootstrap/Modal\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Form from \"react-bootstrap/Form\";\nimport Image from \"react-bootstrap/Image\";\nimport Button from \"react-bootstrap/Button\";\nimport React from \"react\";\nimport \"SplashScreen.css\";\nimport {phone} from \"./Globals\";\nimport {DEFAULT_PLAYER_NAME} from \"./App\";\nimport scoochLogo from \"scooch.png\";\n\ninterface ISplashScreenComponentProps {\n    playerName: string | undefined;\n\n    changePlayerName?(value: string): void;\n\n    solo(): void;\n    challenge(): void;\n}\n\nexport default class SplashScreenComponent extends React.Component<ISplashScreenComponentProps> {\n    public render() {\n        const {playerName, changePlayerName, solo, challenge} = this.props;\n        return <Modal className={\"splash\"} backdrop={\"static\"} show={true} scrollable={false}>\n            <div className={\"top-spacer\"}/>\n            <Modal.Body>\n                <Row>\n                    <Col>\n                        <Image src={scoochLogo}/>\n                    </Col>\n                </Row>\n                <Row>\n                    {phone() && <Col className=\"flex-grow\"/>}\n                    <Col>\n                        {changePlayerName !== undefined && <Form.Group>\n                            {!phone() && <Form.Label>Your Name</Form.Label>}\n                            <Form.Control type=\"input\" placeholder=\"Your Name\"\n                                          value={playerName === DEFAULT_PLAYER_NAME ? undefined : playerName}\n                                          onChange={changeNameThunk}/>\n                        </Form.Group>}\n                    </Col>\n                    {phone() && <Col className=\"flex-grow\"/>}\n                </Row>\n            </Modal.Body>\n                <Row>\n                    <Col className=\"flex-grow\"/>\n                    <Col xs={8}>\n                        <Row>\n                            <Button variant=\"success\" onClick={solo} style={{width: \"100%\"}}>Solo Play</Button>\n                        </Row>\n                    </Col>\n                    <Col className=\"flex-grow\"/>\n                </Row>\n                <Row>&nbsp;</Row>\n                <Row>\n                    <Col className=\"flex-grow\"/>\n                    <Col xs={8}>\n                        <Row>\n                            <Button variant=\"primary\" onClick={challenge} style={{width: \"100%\"}}>Challenge</Button>\n                        </Row>\n                    </Col>\n                    <Col className=\"flex-grow\"/>\n                </Row>\n        </Modal>;\n\n        function changeNameThunk(event: any) {\n            if (changePlayerName !== undefined) {\n                changePlayerName(event.target.value);\n            }\n        }\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './dialogs.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/icon_nuke.cac3548d.png\";","module.exports = __webpack_public_path__ + \"static/media/icon_pass.f12a5cf4.png\";","module.exports = __webpack_public_path__ + \"static/media/icon_reset.3bd82f7b.png\";","module.exports = __webpack_public_path__ + \"static/media/icon_tileBag.56d7d93d.svg\";","module.exports = __webpack_public_path__ + \"static/media/tile.b54a6182.svg\";"],"sourceRoot":""}